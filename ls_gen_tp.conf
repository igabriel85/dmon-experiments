input {
  generator {
        lines =>[
            "1489664544374 mapred.ShuffleMetrics: Context=mapred, Hostname=dice.cdh.slave3, ShuffleOutputBytes=98191, ShuffleOutputsFailed=0, ShuffleOutputsOK=751, ShuffleConnections=2107",
            "1489664200632 dfs.namenode: ProcessName=NameNode, SessionId=null, Context=dfs, Hostname=expcluster-1, CreateFileOps=19660, FilesCreated=20155, FilesAppended=0, GetBlockLocations=36585, FilesRenamed=495, GetListingOps=7381, DeleteFileOps=1580, FilesDeleted=1580, FileInfoOps=39883, AddBlockOps=19495, GetAdditionalDatanodeOps=0, CreateSymlinkOps=0, GetLinkTargetOps=0, FilesInGetListingOps=24549, AllowSnapshotOps=0, DisallowSnapshotOps=0, CreateSnapshotOps=0, DeleteSnapshotOps=0, RenameSnapshotOps=0, ListSnapshottableDirOps=0, SnapshotDiffReportOps=0, BlockReceivedAndDeletedOps=58870, StorageBlockReportOps=20, TransactionsNumOps=101086, TransactionsAvgTime=0.0, SyncsNumOps=62029, SyncsAvgTime=2.0, TransactionsBatchedInSync=8495, BlockReportNumOps=20, BlockReportAvgTime=8.0, CacheReportNumOps=29060, CacheReportAvgTime=0.0, SafeModeTime=42542, FsImageLoadTime=2547, GetEditNumOps=25, GetEditAvgTime=45.0, GetImageNumOps=1, GetImageAvgTime=291.0, PutImageNumOps=25, PutImageAvgTime=15.0, TotalFileOps=125079",
            "1489663974374 jvm.JvmMetrics: Context=jvm, ProcessName=NodeManager, SessionId=null, Hostname=dice.cdh.slave3, MemNonHeapUsedM=93.249664, MemNonHeapCommittedM=94.90625, MemNonHeapMaxM=-1.0, MemHeapUsedM=91.30191, MemHeapCommittedM=790.75, MemHeapMaxM=790.75, MemMaxM=790.75, GcCountParNew=278, GcTimeMillisParNew=3922, GcCountConcurrentMarkSweep=2, GcTimeMillisConcurrentMarkSweep=134, GcCount=280, GcTimeMillis=4056, ThreadsNew=0, ThreadsRunnable=23, ThreadsBlocked=0, ThreadsWaiting=74, ThreadsTimedWaiting=38, ThreadsTerminated=0, LogFatal=0, LogError=0, LogWarn=0, LogInfo=0"
        ]
    #threads => 4
    type => "nodemng"
  }

 generator {
        lines => [
	        "1491590295703 rpcdetailed.rpcdetailed: port=50020, Context=rpcdetailed, Hostname=dice.cdh.slave1",
            "1491590295703 jvm.JvmMetrics: Context=jvm, ProcessName=DataNode, SessionId=null, Hostname=dice.cdh.slave1, MemNonHeapUsedM=64.54314, MemNonHeapCommittedM=66.83203, MemNonHeapMaxM=-1.0, MemHeapUsedM=228.37553, MemHeapCommittedM=790.75, MemHeapMaxM=790.75, MemMaxM=790.75, GcCountParNew=376, GcTimeMillisParNew=3992, GcCountConcurrentMarkSweep=1, GcTimeMillisConcurrentMarkSweep=57, GcCount=377, GcTimeMillis=4049, GcNumWarnThresholdExceeded=0, GcNumInfoThresholdExceeded=0, GcTotalExtraSleepTime=17455, ThreadsNew=0, ThreadsRunnable=18, ThreadsBlocked=0, ThreadsWaiting=12, ThreadsTimedWaiting=19, ThreadsTerminated=0, LogFatal=0, LogError=14, LogWarn=878, LogInfo=227094",
            "1491590295704 dfs.datanode: SessionId=null, Context=dfs, Hostname=dice.cdh.slave1, BytesWritten=423435954, TotalWriteTime=4230, BytesRead=363604171, TotalReadTime=12755, BlocksWritten=45616, BlocksRead=43027, BlocksReplicated=88, BlocksRemoved=45098, BlocksVerified=0, BlockVerificationFailures=0, BlocksCached=0, BlocksUncached=0, ReadsFromLocalClient=40763, ReadsFromRemoteClient=2264, WritesFromLocalClient=33400, WritesFromRemoteClient=12088, BlocksGetLocalPathInfo=0, RemoteBytesRead=161436426, RemoteBytesWritten=282318763, RamDiskBlocksWrite=0, RamDiskBlocksWriteFallback=0, RamDiskBytesWrite=0, RamDiskBlocksReadHits=0, RamDiskBlocksEvicted=0, RamDiskBlocksEvictedWithoutRead=0, RamDiskBlocksEvictionWindowMsNumOps=0, RamDiskBlocksEvictionWindowMsAvgTime=0.0, RamDiskBlocksLazyPersisted=0, RamDiskBlocksDeletedBeforeLazyPersisted=0, RamDiskBytesLazyPersisted=0, RamDiskBlocksLazyPersistWindowMsNumOps=0, RamDiskBlocksLazyPersistWindowMsAvgTime=0.0, FsyncCount=0, VolumeFailures=0, DatanodeNetworkErrors=2613, ReadBlockOpNumOps=43027, ReadBlockOpAvgTime=1.0, WriteBlockOpNumOps=45488, WriteBlockOpAvgTime=17.0, BlockChecksumOpNumOps=0, BlockChecksumOpAvgTime=0.0, CopyBlockOpNumOps=0, CopyBlockOpAvgTime=0.0, ReplaceBlockOpNumOps=0, ReplaceBlockOpAvgTime=0.0, HeartbeatsNumOps=670966, HeartbeatsAvgTime=2.0, BlockReportsNumOps=94, BlockReportsAvgTime=3.0, IncrementalBlockReportsNumOps=45872, IncrementalBlockReportsAvgTime=2.0, CacheReportsNumOps=167843, CacheReportsAvgTime=2.0, PacketAckRoundTripTimeNanosNumOps=93970, PacketAckRoundTripTimeNanosAvgTime=1112819.5, FlushNanosNumOps=122771, FlushNanosAvgTime=5860.0, FsyncNanosNumOps=0, FsyncNanosAvgTime=0.0, SendDataPacketBlockedOnNetworkNanosNumOps=90284, SendDataPacketBlockedOnNetworkNanosAvgTime=10190.0, SendDataPacketTransferNanosNumOps=90284, SendDataPacketTransferNanosAvgTime=13666.5",
            "1491590295704 metricssystem.MetricsSystem: Context=metricssystem, Hostname=dice.cdh.slave1, NumActiveSources=5, NumAllSources=5, NumActiveSinks=1, NumAllSinks=0, Sink_diceNumOps=201307, Sink_diceAvgTime=0.0, Sink_diceDropped=0, Sink_diceQsize=0, SnapshotNumOps=1207847, SnapshotAvgTime=0.2, PublishNumOps=201307, PublishAvgTime=0.0, DroppedPubAll=0",
            "1491590305703 ugi.UgiMetrics: Context=ugi, Hostname=dice.cdh.slave1, LoginSuccessNumOps=0, LoginSuccessAvgTime=0.0, LoginFailureNumOps=0, LoginFailureAvgTime=0.0, GetGroupsNumOps=0, GetGroupsAvgTime=0.0",
            "1491590305703 rpc.rpc: port=50020, Context=rpc, Hostname=dice.cdh.slave1, ReceivedBytes=0, SentBytes=0, RpcQueueTimeNumOps=0, RpcQueueTimeAvgTime=0.0, RpcProcessingTimeNumOps=0, RpcProcessingTimeAvgTime=0.0, RpcAuthenticationFailures=0, RpcAuthenticationSuccesses=0, RpcAuthorizationFailures=0, RpcAuthorizationSuccesses=0, RpcClientBackoff=0, NumOpenConnections=0, CallQueueLength=0"
        ]
    type => "datanode"
    }


generator {
        lines => [
            "1491809860632 rpc.rpc: port=8022, Context=rpc, Hostname=expcluster-1, ReceivedBytes=1168286939, SentBytes=143470790, RpcQueueTimeNumOps=3179626, RpcQueueTimeAvgTime=0.3333333333333333, RpcProcessingTimeNumOps=3179626, RpcProcessingTimeAvgTime=0.11111111111111113, RpcAuthenticationFailures=0, RpcAuthenticationSuccesses=0, RpcAuthorizationFailures=0, RpcAuthorizationSuccesses=37208, RpcClientBackoff=0, NumOpenConnections=4, CallQueueLength=0",
            "1491809860632 rpcdetailed.rpcdetailed: port=8022, Context=rpcdetailed, Hostname=expcluster-1, RetriableExceptionNumOps=2, RetriableExceptionAvgTime=2.5, VersionRequestNumOps=4, VersionRequestAvgTime=1.0, RegisterDatanodeNumOps=4, RegisterDatanodeAvgTime=4.0, SendHeartbeatNumOps=2379202, SendHeartbeatAvgTime=0.14285714285714288, BlockReportNumOps=334, BlockReportAvgTime=2.0, CacheReportNumOps=595147, CacheReportAvgTime=0.0, GetTransactionIdNumOps=37204, GetTransactionIdAvgTime=0.0, SafeModeExceptionNumOps=1, SafeModeExceptionAvgTime=1.0, RollEditLogNumOps=621, RollEditLogAvgTime=17.0, GetEditLogManifestNumOps=621, GetEditLogManifestAvgTime=8.0, BlockReceivedAndDeletedNumOps=166486, BlockReceivedAndDeletedAvgTime=0.33333333333333337",
            "1491809860632 rpc.rpc: port=8020, Context=rpc, Hostname=expcluster-1, ReceivedBytes=226789251, SentBytes=1168761622, RpcQueueTimeNumOps=1094518, RpcQueueTimeAvgTime=0.0, RpcProcessingTimeNumOps=1094518, RpcProcessingTimeAvgTime=1.0, RpcAuthenticationFailures=0, RpcAuthenticationSuccesses=0, RpcAuthorizationFailures=0, RpcAuthorizationSuccesses=413409, RpcClientBackoff=0, NumOpenConnections=1, CallQueueLength=0",
            "1491809860632 rpcdetailed.rpcdetailed: port=8020, Context=rpcdetailed, Hostname=expcluster-1, GetFileInfoNumOps=87465, GetFileInfoAvgTime=1.0, SetSafeModeNumOps=7, SetSafeModeAvgTime=0.0, GetListingNumOps=189341, GetListingAvgTime=0.0, AccessControlExceptionNumOps=412376, AccessControlExceptionAvgTime=1.0, ListCacheDirectivesNumOps=36953, ListCacheDirectivesAvgTime=1.0, ListCachePoolsNumOps=36953, ListCachePoolsAvgTime=0.0, CreateNumOps=55197, CreateAvgTime=4.0, AddBlockNumOps=55039, AddBlockAvgTime=2.0, GetServerDefaultsNumOps=54874, GetServerDefaultsAvgTime=0.0, CompleteNumOps=55215, CompleteAvgTime=1.0, GetBlockLocationsNumOps=72122, GetBlockLocationsAvgTime=1.0, DeleteNumOps=37117, DeleteAvgTime=3.0, ListEncryptionZonesNumOps=26, ListEncryptionZonesAvgTime=0.0, MkdirsNumOps=220, MkdirsAvgTime=1.0, SetPermissionNumOps=495, SetPermissionAvgTime=1.3333333333333333, SetReplicationNumOps=110, SetReplicationAvgTime=1.5, FsyncNumOps=55, FsyncAvgTime=2.0, RenameNumOps=495, RenameAvgTime=2.0, RenewLeaseNumOps=451, RenewLeaseAvgTime=0.0, AbandonBlockNumOps=7, AbandonBlockAvgTime=2.0",
            "1491809860632 dfs.FSNamesystem: Context=dfs, HAState=active, Hostname=expcluster-1, BlocksTotal=413, MissingBlocks=0, MissingReplOneBlocks=0, ExpiredHeartbeats=1, TransactionsSinceLastCheckpoint=13, TransactionsSinceLastLogRoll=13, LastWrittenTransactionId=6686031, LastCheckpointTime=1491809738745, UnderReplicatedBlocks=0, CorruptBlocks=0, CapacityTotal=285267994215, CapacityTotalGB=266.0, CapacityUsed=956645376, CapacityUsedGB=1.0, CapacityRemaining=221720208999, CapacityRemainingGB=206.0, CapacityUsedNonDFS=62591139840, TotalLoad=7, SnapshottableDirectories=0, Snapshots=0, FilesTotal=491, PendingReplicationBlocks=0, ScheduledReplicationBlocks=0, PendingDeletionBlocks=0, ExcessBlocks=0, PostponedMisreplicatedBlocks=0, PendingDataNodeMessageCount=0, MillisSinceLastLoadedEdits=0, BlockCapacity=2097152, StaleDataNodes=0, TotalFiles=491",
            "1491809860632 metricssystem.MetricsSystem: Context=metricssystem, Hostname=expcluster-1, NumActiveSources=10, NumAllSources=10, NumActiveSinks=1, NumAllSinks=0, Sink_diceNumOps=223264, Sink_diceAvgTime=1.0, Sink_diceDropped=1, Sink_diceQsize=0, SnapshotNumOps=2455925, SnapshotAvgTime=0.10000000000000002, PublishNumOps=223265, PublishAvgTime=0.0, DroppedPubAll=1",
            "1491809870631 ugi.UgiMetrics: Context=ugi, Hostname=expcluster-1, LoginSuccessNumOps=0, LoginSuccessAvgTime=0.0, LoginFailureNumOps=0, LoginFailureAvgTime=0.0, GetGroupsNumOps=22229, GetGroupsAvgTime=9.0",
            "1491809870631 jvm.JvmMetrics: Context=jvm, ProcessName=NameNode, SessionId=null, Hostname=expcluster-1, MemNonHeapUsedM=57.578438, MemNonHeapCommittedM=58.0, MemNonHeapMaxM=130.0, MemHeapUsedM=123.722496, MemHeapCommittedM=790.75, MemHeapMaxM=790.75, MemMaxM=790.75, GcCountParNew=1077, GcTimeMillisParNew=7571, GcCountConcurrentMarkSweep=0, GcTimeMillisConcurrentMarkSweep=0, GcCount=1077, GcTimeMillis=7571, GcNumWarnThresholdExceeded=0, GcNumInfoThresholdExceeded=0, GcTotalExtraSleepTime=11398, ThreadsNew=0, ThreadsRunnable=10, ThreadsBlocked=0, ThreadsWaiting=7, ThreadsTimedWaiting=79, ThreadsTerminated=0, LogFatal=0, LogError=0, LogWarn=414659, LogInfo=1062478",
            "1491809870632 dfs.namenode: ProcessName=NameNode, SessionId=null, Context=dfs, Hostname=expcluster-1, CreateFileOps=55198, FilesCreated=55693, FilesAppended=0, GetBlockLocations=72123, FilesRenamed=495, GetListingOps=189346, DeleteFileOps=37118, FilesDeleted=37118, FileInfoOps=87466, AddBlockOps=55040, GetAdditionalDatanodeOps=0, CreateSymlinkOps=0, GetLinkTargetOps=0, FilesInGetListingOps=206523, AllowSnapshotOps=0, DisallowSnapshotOps=0, CreateSnapshotOps=0, DeleteSnapshotOps=0, RenameSnapshotOps=0, ListSnapshottableDirOps=0, SnapshotDiffReportOps=0, BlockReceivedAndDeletedOps=166489, StorageBlockReportOps=334, TransactionsNumOps=315534, TransactionsAvgTime=0.16666666666666666, SyncsNumOps=205387, SyncsAvgTime=1.5, TransactionsBatchedInSync=222900, BlockReportNumOps=334, BlockReportAvgTime=2.0, CacheReportNumOps=595150, CacheReportAvgTime=0.0, SafeModeTime=42542, FsImageLoadTime=2547, GetEditNumOps=621, GetEditAvgTime=1.0, GetImageNumOps=1, GetImageAvgTime=291.0, PutImageNumOps=621, PutImageAvgTime=15.0, TotalFileOps=496786",
            "1491809870632 default.StartupProgress: Hostname=expcluster-1, ElapsedTime=40972, PercentComplete=1.0, LoadingFsImageCount=51, LoadingFsImageElapsedTime=941, LoadingFsImageTotal=51, LoadingFsImagePercentComplete=1.0, LoadingEditsCount=375, LoadingEditsElapsedTime=211, LoadingEditsTotal=375, LoadingEditsPercentComplete=1.0, SavingCheckpointCount=0, SavingCheckpointElapsedTime=680, SavingCheckpointTotal=0, SavingCheckpointPercentComplete=1.0, SafeModeCount=28, SafeModeElapsedTime=38461, SafeModeTotal=28, SafeModePercentComplete=1.0",
            "1491809870632 rpc.RetryCache.NameNodeRetryCache: Context=rpc, Hostname=expcluster-1, CacheHit=0, CacheCleared=0, CacheUpdated=316025"
        ]
    type => "nameNode"
    }


generator {
        lines => [
            "1489648091072 jvm.JvmMetrics: Context=jvm, ProcessName=MRAppMaster, SessionId=null, Hostname=dice.cdh.slave2, MemNonHeapUsedM=56.09527, MemNonHeapCommittedM=57.1875, MemNonHeapMaxM=-1.0, MemHeapUsedM=156.10443, MemHeapCommittedM=293.5, MemHeapMaxM=700.5, MemMaxM=700.5, GcCountPS Scavenge=6, GcTimeMillisPS Scavenge=92, GcCountPS MarkSweep=2, GcTimeMillisPS MarkSweep=118, GcCount=8, GcTimeMillis=210, ThreadsNew=0, ThreadsRunnable=11, ThreadsBlocked=0, ThreadsWaiting=20, ThreadsTimedWaiting=51, ThreadsTerminated=0, LogFatal=0, LogError=0, LogWarn=1, LogInfo=234",
            "1489648091074 ugi.UgiMetrics: Context=ugi, Hostname=dice.cdh.slave2, LoginSuccessNumOps=0, LoginSuccessAvgTime=0.0, LoginFailureNumOps=0, LoginFailureAvgTime=0.0, GetGroupsNumOps=0, GetGroupsAvgTime=0.0",
            "1489648091074 mapred.MRAppMetrics: Context=mapred, Hostname=dice.cdh.slave2, JobsSubmitted=1, JobsCompleted=0, JobsFailed=0, JobsKilled=0, JobsPreparing=0, JobsRunning=1, MapsLaunched=8, MapsCompleted=1, MapsFailed=0, MapsKilled=0, MapsRunning=7, MapsWaiting=2, ReducesLaunched=0, ReducesCompleted=0, ReducesFailed=0, ReducesKilled=0, ReducesRunning=0, ReducesWaiting=1",
            "1489648091074 rpc.rpc: port=58215, Context=rpc, Hostname=dice.cdh.slave2, ReceivedBytes=3136, SentBytes=4742, RpcQueueTimeNumOps=24, RpcQueueTimeAvgTime=9.874999999999998, RpcProcessingTimeNumOps=24, RpcProcessingTimeAvgTime=1.8333333333333328, RpcAuthenticationFailures=0, RpcAuthenticationSuccesses=0, RpcAuthorizationFailures=0, RpcAuthorizationSuccesses=1, RpcClientBackoff=0, NumOpenConnections=1, CallQueueLength=0",
            "1489648091074 rpcdetailed.rpcdetailed: port=58215, Context=rpcdetailed, Hostname=dice.cdh.slave2, GetJobReportNumOps=17, GetJobReportAvgTime=1.764705882352941, GetTaskAttemptCompletionEventsNumOps=7, GetTaskAttemptCompletionEventsAvgTime=1.9999999999999998",
            "1489648091075 rpc.rpc: port=35128, Context=rpc, Hostname=dice.cdh.slave2, ReceivedBytes=5804, SentBytes=4460, RpcQueueTimeNumOps=10, RpcQueueTimeAvgTime=0.39999999999999997, RpcProcessingTimeNumOps=10, RpcProcessingTimeAvgTime=2.2, RpcAuthenticationFailures=0, RpcAuthenticationSuccesses=7, RpcAuthorizationFailures=0, RpcAuthorizationSuccesses=7, RpcClientBackoff=0, NumOpenConnections=6, CallQueueLength=0",
            "1489648091075 rpcdetailed.rpcdetailed: port=35128, Context=rpcdetailed, Hostname=dice.cdh.slave2, FatalErrorNumOps=0, FatalErrorAvgTime=0.0, GetTaskNumOps=7, GetTaskAvgTime=0.9999999999999999, DoneNumOps=1, DoneAvgTime=1.0, CanCommitNumOps=0, CanCommitAvgTime=0.0, CommitPendingNumOps=0, CommitPendingAvgTime=0.0, FsErrorNumOps=0, FsErrorAvgTime=0.0, ShuffleErrorNumOps=0, ShuffleErrorAvgTime=0.0, GetMapCompletionEventsNumOps=0, GetMapCompletionEventsAvgTime=0.0, PingNumOps=0, PingAvgTime=0.0, ReportDiagnosticInfoNumOps=0, ReportDiagnosticInfoAvgTime=0.0, StatusUpdateNumOps=2, StatusUpdateAvgTime=7.0, ReportNextRecordRangeNumOps=0, ReportNextRecordRangeAvgTime=0.0",
            "1489648091076 metricssystem.MetricsSystem: Context=metricssystem, Hostname=dice.cdh.slave2, NumActiveSources=7, NumAllSources=7, NumActiveSinks=1, NumAllSinks=0, Sink_diceNumOps=0, Sink_diceAvgTime=0.0, Sink_diceDropped=0, Sink_diceQsize=0, SnapshotNumOps=7, SnapshotAvgTime=0.5714285714285714, PublishNumOps=0, PublishAvgTime=0.0, DroppedPubAll=0"
        ]
    type => "mrapp"
    }


generator {
        lines => [
            "1491809990498 yarn.ClusterMetrics: ClusterMetrics=ResourceManager, Context=yarn, Hostname=dice.cdh.slave4, NumActiveNMs=3, NumDecommissionedNMs=0, NumLostNMs=1, NumUnhealthyNMs=0, NumRebootedNMs=0, AMLaunchDelayNumOps=55, AMLaunchDelayAvgTime=16.0, AMRegisterDelayNumOps=55, AMRegisterDelayAvgTime=5145.0",
            "1491809990498 yarn.QueueMetrics: Queue=root.hdfs, Context=yarn, Hostname=dice.cdh.slave4, running_0=0, running_60=0, running_300=0, running_1440=0, FairShareMB=0, FairShareVCores=0, SteadyFairShareMB=3072, SteadyFairShareVCores=0, MinShareMB=0, MinShareVCores=0, MaxShareMB=2147483647, MaxShareVCores=2147483647, AppsSubmitted=55, AppsRunning=0, AppsPending=0, AppsCompleted=55, AppsKilled=0, AppsFailed=0, AllocatedMB=0, AllocatedVCores=0, AllocatedContainers=0, AggregateContainersAllocated=17350, AggregateContainersReleased=17350, AvailableMB=0, AvailableVCores=0, PendingMB=0, PendingVCores=0, PendingContainers=0, ReservedMB=0, ReservedVCores=0, ReservedContainers=0, ActiveUsers=0, ActiveApplications=0, AppAttemptFirstContainerAllocationDelayNumOps=55, AppAttemptFirstContainerAllocationDelayAvgTime=350.0",
            "1491809990498 yarn.QueueMetrics: Queue=root.hdfs, User=hdfs, Context=yarn, Hostname=dice.cdh.slave4, running_0=0, running_60=0, running_300=0, running_1440=0, AppsSubmitted=55, AppsRunning=0, AppsPending=0, AppsCompleted=55, AppsKilled=0, AppsFailed=0, AllocatedMB=0, AllocatedVCores=0, AllocatedContainers=0, AggregateContainersAllocated=17350, AggregateContainersReleased=17350, AvailableMB=0, AvailableVCores=0, PendingMB=0, PendingVCores=0, PendingContainers=0, ReservedMB=0, ReservedVCores=0, ReservedContainers=0, ActiveUsers=0, ActiveApplications=0, AppAttemptFirstContainerAllocationDelayNumOps=0, AppAttemptFirstContainerAllocationDelayAvgTime=0.0",
            "1491809990498 yarn.QueueMetrics: Queue=root, User=hdfs, Context=yarn, Hostname=dice.cdh.slave4, running_0=0, running_60=0, running_300=0, running_1440=0, AppsSubmitted=55, AppsRunning=0, AppsPending=0, AppsCompleted=55, AppsKilled=0, AppsFailed=0, AllocatedMB=0, AllocatedVCores=0, AllocatedContainers=0, AggregateContainersAllocated=17350, AggregateContainersReleased=17350, AvailableMB=0, AvailableVCores=0, PendingMB=0, PendingVCores=0, PendingContainers=0, ReservedMB=0, ReservedVCores=0, ReservedContainers=0, ActiveUsers=0, ActiveApplications=0, AppAttemptFirstContainerAllocationDelayNumOps=0, AppAttemptFirstContainerAllocationDelayAvgTime=0.0",
            "1491809990498 metricssystem.MetricsSystem: Context=metricssystem, Hostname=dice.cdh.slave4, NumActiveSources=17, NumAllSources=17, NumActiveSinks=1, NumAllSinks=0, Sink_diceNumOps=223280, Sink_diceAvgTime=2.0, Sink_diceDropped=0, Sink_diceQsize=0, SnapshotNumOps=3997790, SnapshotAvgTime=0.055555555555555566, PublishNumOps=223280, PublishAvgTime=0.0, DroppedPubAll=0",
            "1491810000496 ugi.UgiMetrics: Context=ugi, Hostname=dice.cdh.slave4, LoginSuccessNumOps=0, LoginSuccessAvgTime=0.0, LoginFailureNumOps=0, LoginFailureAvgTime=0.0, GetGroupsNumOps=0, GetGroupsAvgTime=0.0",
            "1491810000496 jvm.JvmMetrics: Context=jvm, ProcessName=ResourceManager, SessionId=null, Hostname=dice.cdh.slave4, MemNonHeapUsedM=79.11507, MemNonHeapCommittedM=80.75781, MemNonHeapMaxM=-1.0, MemHeapUsedM=125.663536, MemHeapCommittedM=790.75, MemHeapMaxM=790.75, MemMaxM=790.75, GcCountParNew=7731, GcTimeMillisParNew=54154, GcCountConcurrentMarkSweep=1, GcTimeMillisConcurrentMarkSweep=30, GcCount=7732, GcTimeMillis=54184, ThreadsNew=0, ThreadsRunnable=16, ThreadsBlocked=0, ThreadsWaiting=20, ThreadsTimedWaiting=177, ThreadsTerminated=0, LogFatal=0, LogError=0, LogWarn=0, LogInfo=0",
            "1491810000497 yarn.QueueMetrics: Queue=root, Context=yarn, Hostname=dice.cdh.slave4, running_0=0, running_60=0, running_300=0, running_1440=0, FairShareMB=6144, FairShareVCores=12, SteadyFairShareMB=6144, SteadyFairShareVCores=12, MinShareMB=0, MinShareVCores=0, MaxShareMB=2147483647, MaxShareVCores=2147483647, AppsSubmitted=55, AppsRunning=0, AppsPending=0, AppsCompleted=55, AppsKilled=0, AppsFailed=0, AllocatedMB=0, AllocatedVCores=0, AllocatedContainers=0, AggregateContainersAllocated=17350, AggregateContainersReleased=17350, AvailableMB=6144, AvailableVCores=12, PendingMB=0, PendingVCores=0, PendingContainers=0, ReservedMB=0, ReservedVCores=0, ReservedContainers=0, ActiveUsers=0, ActiveApplications=0, AppAttemptFirstContainerAllocationDelayNumOps=0, AppAttemptFirstContainerAllocationDelayAvgTime=0.0",
            "1491810000497 fairscheduler-op-durations.FSOpDurations: FSOpDurations=FSOpDurations, Context=fairscheduler-op-durations, Hostname=dice.cdh.slave4, ContinuousSchedulingRunNumOps=426443853, ContinuousSchedulingRunAvgTime=0.014150943396226395, ContinuousSchedulingRunStdevTime=0.1182525879706472, ContinuousSchedulingRunIMinTime=0.0, ContinuousSchedulingRunIMaxTime=1.0, ContinuousSchedulingRunMinTime=0.0, ContinuousSchedulingRunMaxTime=844.0, ContinuousSchedulingRunINumOps=424, NodeUpdateCallNumOps=7127400, NodeUpdateCallAvgTime=0.0, NodeUpdateCallStdevTime=0.0, NodeUpdateCallIMinTime=0.0, NodeUpdateCallIMaxTime=1.401298464324817E-45, NodeUpdateCallMinTime=0.0, NodeUpdateCallMaxTime=846.0, NodeUpdateCallINumOps=7, UpdateThreadRunNumOps=4463471, UpdateThreadRunAvgTime=0.0, UpdateThreadRunStdevTime=0.0, UpdateThreadRunIMinTime=0.0, UpdateThreadRunIMaxTime=1.401298464324817E-45, UpdateThreadRunMinTime=0.0, UpdateThreadRunMaxTime=717.0, UpdateThreadRunINumOps=5, UpdateCallNumOps=4463471, UpdateCallAvgTime=0.0, UpdateCallStdevTime=0.0, UpdateCallIMinTime=0.0, UpdateCallIMaxTime=1.401298464324817E-45, UpdateCallMinTime=0.0, UpdateCallMaxTime=34.0, UpdateCallINumOps=5, PreemptCallNumOps=0, PreemptCallAvgTime=0.0, PreemptCallStdevTime=0.0, PreemptCallIMinTime=3.4028234663852886E38, PreemptCallIMaxTime=1.401298464324817E-45, PreemptCallMinTime=3.4028234663852886E38, PreemptCallMaxTime=1.401298464324817E-45, PreemptCallINumOps=0",
            "1491810000497 yarn.QueueMetrics: Queue=root.default, Context=yarn, Hostname=dice.cdh.slave4, running_0=0, running_60=0, running_300=0, running_1440=0, FairShareMB=0, FairShareVCores=0, SteadyFairShareMB=3072, SteadyFairShareVCores=0, MinShareMB=0, MinShareVCores=0, MaxShareMB=2147483647, MaxShareVCores=2147483647, AppsSubmitted=0, AppsRunning=0, AppsPending=0, AppsCompleted=0, AppsKilled=0, AppsFailed=0, AllocatedMB=0, AllocatedVCores=0, AllocatedContainers=0, AggregateContainersAllocated=0, AggregateContainersReleased=0, AvailableMB=0, AvailableVCores=0, PendingMB=0, PendingVCores=0, PendingContainers=0, ReservedMB=0, ReservedVCores=0, ReservedContainers=0, ActiveUsers=0, ActiveApplications=0, AppAttemptFirstContainerAllocationDelayNumOps=0, AppAttemptFirstContainerAllocationDelayAvgTime=0.0",
            "1491810000497 rpc.rpc: port=8031, Context=rpc, Hostname=dice.cdh.slave4, ReceivedBytes=1377477927, SentBytes=307491871, RpcQueueTimeNumOps=7127404, RpcQueueTimeAvgTime=0.0, RpcProcessingTimeNumOps=7127404, RpcProcessingTimeAvgTime=0.0, RpcAuthenticationFailures=0, RpcAuthenticationSuccesses=0, RpcAuthorizationFailures=0, RpcAuthorizationSuccesses=4, RpcClientBackoff=0, NumOpenConnections=3, CallQueueLength=0",
            "1491810000497 rpcdetailed.rpcdetailed: port=8031, Context=rpcdetailed, Hostname=dice.cdh.slave4, RegisterNodeManagerNumOps=4, RegisterNodeManagerAvgTime=33.5, NodeHeartbeatNumOps=7127400, NodeHeartbeatAvgTime=0.0",
            "1491810000497 rpc.rpc: port=8030, Context=rpc, Hostname=dice.cdh.slave4, ReceivedBytes=3175644, SentBytes=5196139, RpcQueueTimeNumOps=14513, RpcQueueTimeAvgTime=0.16666666666666669, RpcProcessingTimeNumOps=14513, RpcProcessingTimeAvgTime=0.33333333333333337, RpcAuthenticationFailures=0, RpcAuthenticationSuccesses=55, RpcAuthorizationFailures=0, RpcAuthorizationSuccesses=55, RpcClientBackoff=0, NumOpenConnections=0, CallQueueLength=0",
            "1491810000497 rpcdetailed.rpcdetailed: port=8030, Context=rpcdetailed, Hostname=dice.cdh.slave4, RegisterApplicationMasterNumOps=55, RegisterApplicationMasterAvgTime=4.0, AllocateNumOps=14348, AllocateAvgTime=0.25, FinishApplicationMasterNumOps=110, FinishApplicationMasterAvgTime=0.5",
            "1491810000497 rpc.rpc: port=8032, Context=rpc, Hostname=dice.cdh.slave4, ReceivedBytes=196730, SentBytes=222127, RpcQueueTimeNumOps=967, RpcQueueTimeAvgTime=0.2, RpcProcessingTimeNumOps=967, RpcProcessingTimeAvgTime=0.4, RpcAuthenticationFailures=0, RpcAuthenticationSuccesses=0, RpcAuthorizationFailures=0, RpcAuthorizationSuccesses=55, RpcClientBackoff=0, NumOpenConnections=0, CallQueueLength=0",
            "1491810000497 rpcdetailed.rpcdetailed: port=8032, Context=rpcdetailed, Hostname=dice.cdh.slave4, GetNewApplicationNumOps=55, GetNewApplicationAvgTime=0.0, SubmitApplicationNumOps=55, SubmitApplicationAvgTime=2.0, GetApplicationReportNumOps=857, GetApplicationReportAvgTime=0.4",
            "1491810000497 rpc.rpc: port=8033, Context=rpc, Hostname=dice.cdh.slave4, ReceivedBytes=14, SentBytes=187, RpcQueueTimeNumOps=0, RpcQueueTimeAvgTime=0.0, RpcProcessingTimeNumOps=0, RpcProcessingTimeAvgTime=0.0, RpcAuthenticationFailures=0, RpcAuthenticationSuccesses=0, RpcAuthorizationFailures=0, RpcAuthorizationSuccesses=0, RpcClientBackoff=0, NumOpenConnections=0, CallQueueLength=0",
            "1491810000497 rpcdetailed.rpcdetailed: port=8033, Context=rpcdetailed, Hostname=dice.cdh.slave4"
        ]
    type => "resMng"
    }


generator {
        lines => [
            "1489648320479 metricssystem.MetricsSystem: Context=metricssystem, Hostname=dice.cdh.slave1, NumActiveSources=2, NumAllSources=2, NumActiveSinks=1, NumAllSinks=0, Sink_diceNumOps=0, Sink_diceAvgTime=0.0, Sink_diceDropped=0, Sink_diceQsize=0, SnapshotNumOps=2, SnapshotAvgTime=0.5, PublishNumOps=0, PublishAvgTime=0.0, DroppedPubAll=0",
            "1489648427091 ugi.UgiMetrics: Context=ugi, Hostname=dice.cdh.slave1, LoginSuccessNumOps=0, LoginSuccessAvgTime=0.0, LoginFailureNumOps=0, LoginFailureAvgTime=0.0, GetGroupsNumOps=0, GetGroupsAvgTime=0.0",
            "1489648427092 jvm.JvmMetrics: Context=jvm, ProcessName=jvm_1489577180719_0007_r_000092, SessionId=, Hostname=dice.cdh.slave1, MemNonHeapUsedM=32.579918, MemNonHeapCommittedM=33.25, MemNonHeapMaxM=-1.0, MemHeapUsedM=81.95141, MemHeapCommittedM=186.0, MemHeapMaxM=729.0, MemMaxM=729.0, GcCountPS Scavenge=4, GcTimeMillisPS Scavenge=77, GcCountPS MarkSweep=1, GcTimeMillisPS MarkSweep=61, GcCount=5, GcTimeMillis=138, ThreadsNew=0, ThreadsRunnable=3, ThreadsBlocked=0, ThreadsWaiting=17, ThreadsTimedWaiting=7, ThreadsTerminated=0, LogFatal=0, LogError=0, LogWarn=0, LogInfo=385"
        ]
    type => "reduce"
    }
}


filter{
    if [type]=="nodemng"{ #same as set in logstash-forwarder configuration json
        grok{
            break_on_match => false
            #metricssystem.MetricsSystem
            match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, NumActiveSources=%{NUMBER:NumActiveSources:float}, NumAllSources=%{NUMBER:NumAllSources:float}, NumActiveSinks=%{NUMBER:NumActiveSinks:float}, NumAllSinks=%{NUMBER:NumAllSinks:float}, Sink_diceNumOps=%{NUMBER:Sink_diceNumOps:float}, Sink_diceAvgTime=%{NUMBER:Sink_diceAvgTime:float}, Sink_diceDropped=%{NUMBER:Sink_diceDropped:float}, Sink_diceQsize=%{NUMBER:Sink_diceQsize:float}, SnapshotNumOps=%{NUMBER:SnapshotNumOps:float}, SnapshotAvgTime=%{NUMBER:SnapshotAvgTime:float}, PublishNumOps=%{NUMBER:PublishNumOps:float}, PublishAvgTime=%{NUMBER:PublishAvgTime:float}, DroppedPubAll=%{NUMBER: DroppedPubAll:float}"]

            #ugi.UgiMetrics
            match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, LoginSuccessNumOps=%{NUMBER:LoginSuccessNumOps:float}, LoginSuccessAvgTime=%{NUMBER:LoginSuccessAvgTime:float}, LoginFailureNumOps=%{NUMBER:LoginFailureNumOps:float}, LoginFailureAvgTime=%{NUMBER:LoginFailureAvgTime:float}, GetGroupsNumOps=%{NUMBER:GetGroupsNumOps:float}, GetGroupsAvgTime=%{NUMBER:GetGroupsAvgTime:float}"]


            #jvm.JvmMetrics
            match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: Context=%{WORD:context}, ProcessName=%{WORD:ProcessName}, SessionId=%{WORD:SessionId}, Hostname=%{HOSTNAME:hostname}, MemNonHeapUsedM=%{NUMBER:MemNonHeapUsedM:float}, MemNonHeapCommittedM=%{NUMBER:MemNonHeapCommittedM:float}, MemNonHeapMaxM=%{DATA:MemNonHeapMaxM}, MemHeapUsedM=%{NUMBER:MemHeapUsedM:float}, MemHeapCommittedM=%{NUMBER:MemHeapCommittedM:float}, MemHeapMaxM=%{NUMBER:MemHeapMaxM:float}, MemMaxM=%{NUMBER:MemMaxM:float}, GcCountParNew=%{NUMBER:GcCountParNew:float}, GcTimeMillisParNew=%{NUMBER:GcTimeMillisParNew:float}, GcCountConcurrentMarkSweep=%{NUMBER:GcCountConcurrentMarkSweep:float}, GcTimeMillisConcurrentMarkSweep=%{NUMBER:GcTimeMillisConcurrentMarkSweep:float}, GcCount=%{NUMBER:GcCount:float}, GcTimeMillis=%{NUMBER:GcTimeMillis:float}, ThreadsNew=%{NUMBER:ThreadsNew:float}, ThreadsRunnable=%{NUMBER:ThreadsRunnable:float}, ThreadsBlocked=%{NUMBER:ThreadsBlocked:float}, ThreadsWaiting=%{NUMBER:ThreadsWaiting:float}, ThreadsTimedWaiting=%{NUMBER:ThreadsTimedWaiting:float}, ThreadsTerminated=%{NUMBER:ThreadsTerminated:float}, LogFatal=%{NUMBER:LogFatal:float}, LogError=%{NUMBER:LogError:float}, LogWarn=%{NUMBER:LogWarn:float}, LogInfo=%{NUMBER:LogInfo:float}"]

            #yarn.NodeManagerMetrics
            match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, ContainersLaunched=%{NUMBER:ContainersLaunched:float}, ContainersCompleted=%{NUMBER:ContainersCompleted:float}, ContainersFailed=%{NUMBER:ContainersFailed:float}, ContainersKilled=%{NUMBER:ContainersKilled:float}, ContainersIniting=%{NUMBER:ContainersIniting:float}, ContainersRunning=%{NUMBER:ContainersRunning:float}, AllocatedGB=%{NUMBER:AllocatedGB:float}, AllocatedContainers=%{NUMBER:AllocatedContainers:float}, AvailableGB=%{NUMBER:AvailableGB:float}, AllocatedVCores=%{NUMBER:AllocatedVCores:float}, AvailableVCores=%{NUMBER:AvailableVCores:float}, ContainerLaunchDurationNumOps=%{NUMBER:ContainerLaunchDurationNumOps:float}, ContainerLaunchDurationAvgTime=%{NUMBER:ContainerLaunchDurationAvgTime:float}"]

            #mapred.ShuffleMetrics
            match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, ShuffleOutputBytes=%{NUMBER:ShuffleOutputBytes:float}, ShuffleOutputsFailed=%{NUMBER:ShuffleOutputsFailed:float}, ShuffleOutputsOK=%{NUMBER:ShuffleOutputsOK:float}, ShuffleConnections=%{NUMBER:ShuffleConnections:float}"]

            #rpc.rpc
            match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: port=%{NUMBER:port:int}, Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, ReceivedBytes=%{NUMBER:ReceivedBytes:float}, SentBytes=%{NUMBER:SentBytes:float}, RpcQueueTimeNumOps=%{NUMBER:RpcQueueTimeNumOps:float}, RpcQueueTimeAvgTime=%{NUMBER:RpcQueueTimeAvgTime:float}, RpcProcessingTimeNumOps=%{NUMBER:RpcProcessingTimeNumOps:float}, RpcProcessingTimeAvgTime=%{NUMBER:RpcProcessingTimeAvgTime:float}, RpcAuthenticationFailures=%{NUMBER:RpcAuthenticationFailures:float}, RpcAuthenticationSuccesses=%{NUMBER:RpcAuthenticationSuccesses:float}, RpcAuthorizationFailures=%{NUMBER:RpcAuthorizationFailures:float}, RpcAuthorizationSuccesses=%{NUMBER:RpcAuthorizationSuccesses:float}, NumOpenConnections=%{NUMBER:NumOpenConnections:float}, CallQueueLength=%{NUMBER:CallQueueLength:float}"]

            #rpcdetailed.rpcdetailed
            match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: port=%{NUMBER:port:int}, Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}"]
        }
    }

    if [type] == "nodemng"{
	    metrics{
	        timer => ["events","%{duration}"]
	        add_tag => "metric"
	    }
    }

    if [type]=="datanode"{
        grok{
            break_on_match => false
            #metricssystem.MetricsSystem
            match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, NumActiveSources=%{NUMBER:NumActiveSources:float}, NumAllSources=%{NUMBER:NumAllSources:float}, NumActiveSinks=%{NUMBER:NumActiveSinks:float}, NumAllSinks=%{NUMBER:NumAllSinks:float}, Sink_diceNumOps=%{NUMBER:Sink_diceNumOps:float}, Sink_diceAvgTime=%{NUMBER:Sink_diceAvgTime:float}, Sink_diceDropped=%{NUMBER:Sink_diceDropped:float}, Sink_diceQsize=%{NUMBER:Sink_diceQsize:float}, SnapshotNumOps=%{NUMBER:SnapshotNumOps:float}, SnapshotAvgTime=%{NUMBER:SnapshotAvgTime:float}, PublishNumOps=%{NUMBER:PublishNumOps:float}, PublishAvgTime=%{NUMBER:PublishAvgTime:float}, DroppedPubAll=%{NUMBER: DroppedPubAll}"]

            #ugi.UgiMetrics
            match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, LoginSuccessNumOps=%{NUMBER:LoginSuccessNumOps:float}, LoginSuccessAvgTime=%{NUMBER:LoginSuccessAvgTime:float}, LoginFailureNumOps=%{NUMBER:LoginFailureNumOps:float}, LoginFailureAvgTime=%{NUMBER:LoginFailureAvgTime:float}, GetGroupsNumOps=%{NUMBER:GetGroupsNumOps:float}, GetGroupsAvgTime=%{NUMBER:GetGroupsAvgTime:float}"]

            #jvm.JvmMetrics
            match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: Context=%{WORD:context}, ProcessName=%{WORD:ProcessName}, SessionId=%{WORD:SessionId}, Hostname=%{HOSTNAME:hostname}, MemNonHeapUsedM=%{NUMBER:MemNonHeapUsedM:float}, MemNonHeapCommittedM=%{NUMBER:MemNonHeapCommittedM:float}, MemNonHeapMaxM=%{NUMBER:MemNonHeapMaxM:float}, MemHeapUsedM=%{NUMBER:MemHeapUsedM:float}, MemHeapCommittedM=%{NUMBER:MemHeapCommittedM:float}, MemHeapMaxM=%{NUMBER:MemHeapMaxM:float}, MemMaxM=%{NUMBER:MemMaxM:float}, GcCountParNew=%{NUMBER:GcCountParNew:float}, GcTimeMillisParNew=%{NUMBER:GcTimeMillisParNew:float}, GcCountConcurrentMarkSweep=%{NUMBER:GcCountConcurrentMarkSweep:float}, GcTimeMillisConcurrentMarkSweep=%{NUMBER:GcTimeMillisConcurrentMarkSweep:float}, GcCount=%{NUMBER:GcCount:float}, GcTimeMillis=%{NUMBER:GcTimeMillis:float}, GcNumWarnThresholdExceeded=%{NUMBER:GcNumWarnThresholdExceeded:float}, GcNumInfoThresholdExceeded=%{NUMBER:GcNumInfoThresholdExceeded:float}, GcTotalExtraSleepTime=%{NUMBER:GcTotalExtraSleepTime:float}, ThreadsNew=%{NUMBER:ThreadsNew:float}, ThreadsRunnable=%{NUMBER:ThreadsRunnable:float}, ThreadsBlocked=%{NUMBER:ThreadsBlocked:float}, ThreadsWaiting=%{NUMBER:ThreadsWaiting:float}, ThreadsTimedWaiting=%{NUMBER:ThreadsTimedWaiting:float}, ThreadsTerminated=%{NUMBER:ThreadsTerminated:float}, LogFatal=%{NUMBER:LogFatal:float}, LogError=%{NUMBER:LogError:float}, LogWarn=%{NUMBER:LogWarn:float}, LogInfo=%{NUMBER:LogInfo:float}"]

            #dfs.datanode
            match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: SessionId=%{WORD:SessionId}, Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, BytesWritten=%{NUMBER:BytesWritten:float}, BytesRead=%{NUMBER:BytesRead:float}, BlocksWritten=%{NUMBER:BlocksWritten:float}, BlocksRead=%{NUMBER:BlocksRead:float}, BlocksReplicated=%{NUMBER:BlocksReplicated:float}, BlocksRemoved=%{NUMBER:BlocksRemoved:float}, BlocksVerified=%{NUMBER:BlocksVerified:float}, BlockVerificationFailures=%{NUMBER:BlockVerificationFailures:float}, BlocksCached=%{NUMBER:BlocksCached:float}, BlocksUncached=%{NUMBER:BlocksUncached:float}, ReadsFromLocalClient=%{NUMBER:ReadsFromLocalClient:float}, ReadsFromRemoteClient=%{NUMBER:ReadsFromRemoteClient:float}, WritesFromLocalClient=%{NUMBER:WritesFromLocalClient:float}, WritesFromRemoteClient=%{NUMBER:WritesFromRemoteClient:float}, BlocksGetLocalPathInfo=%{NUMBER:BlocksGetLocalPathInfo:float}, RamDiskBlocksWrite=%{NUMBER:RamDiskBlocksWrite:float}, RamDiskBlocksWriteFallback=%{NUMBER:RamDiskBlocksWriteFallback:float}, RamDiskBytesWrite=%{NUMBER:RamDiskBytesWrite:float}, RamDiskBlocksReadHits=%{NUMBER:RamDiskBlocksReadHits:float}, RamDiskBlocksEvicted=%{NUMBER:RamDiskBlocksEvicted:float}, RamDiskBlocksEvictedWithoutRead=%{NUMBER:RamDiskBlocksEvictedWithoutRead:float}, RamDiskBlocksEvictionWindowMsNumOps=%{NUMBER:RamDiskBlocksEvictionWindowMsNumOps:float}, RamDiskBlocksEvictionWindowMsAvgTime=%{NUMBER:RamDiskBlocksEvictionWindowMsAvgTime:float}, RamDiskBlocksLazyPersisted=%{NUMBER:RamDiskBlocksLazyPersisted:float}, RamDiskBlocksDeletedBeforeLazyPersisted=%{NUMBER:RamDiskBlocksDeletedBeforeLazyPersisted:float}, RamDiskBytesLazyPersisted=%{NUMBER:RamDiskBytesLazyPersisted:float}, RamDiskBlocksLazyPersistWindowMsNumOps=%{NUMBER:RamDiskBlocksLazyPersistWindowMsNumOps:float}, RamDiskBlocksLazyPersistWindowMsAvgTime=%{NUMBER:RamDiskBlocksLazyPersistWindowMsAvgTime:float}, FsyncCount=%{NUMBER:FsyncCount:float}, VolumeFailures=%{NUMBER:VolumeFailures:float}, DatanodeNetworkErrors=%{NUMBER:DatanodeNetworkErrors:float}, ReadBlockOpNumOps=%{NUMBER:ReadBlockOpNumOps:float}, ReadBlockOpAvgTime=%{NUMBER:ReadBlockOpAvgTime:float}, WriteBlockOpNumOps=%{NUMBER:WriteBlockOpNumOps:float}, WriteBlockOpAvgTime=%{NUMBER:WriteBlockOpAvgTime:float}, BlockChecksumOpNumOps=%{NUMBER:BlockChecksumOpNumOps:float}, BlockChecksumOpAvgTime=%{NUMBER:BlockChecksumOpAvgTime:float}, CopyBlockOpNumOps=%{NUMBER:CopyBlockOpNumOps:float}, CopyBlockOpAvgTime=%{NUMBER:CopyBlockOpAvgTime:float}, ReplaceBlockOpNumOps=%{NUMBER:ReplaceBlockOpNumOps:float}, ReplaceBlockOpAvgTime=%{NUMBER:ReplaceBlockOpAvgTime:float}, HeartbeatsNumOps=%{NUMBER:HeartbeatsNumOps:float}, HeartbeatsAvgTime=%{NUMBER:HeartbeatsAvgTime:float}, BlockReportsNumOps=%{NUMBER:BlockReportsNumOps:float}, BlockReportsAvgTime=%{NUMBER:BlockReportsAvgTime:float}, CacheReportsNumOps=%{NUMBER:CacheReportsNumOps:float}, CacheReportsAvgTime=%{NUMBER:CacheReportsAvgTime:float}, PacketAckRoundTripTimeNanosNumOps=%{NUMBER:PacketAckRoundTripTimeNanosNumOps:float}, PacketAckRoundTripTimeNanosAvgTime=%{NUMBER:PacketAckRoundTripTimeNanosAvgTime:float}, FlushNanosNumOps=%{NUMBER:FlushNanosNumOps:float}, FlushNanosAvgTime=%{NUMBER:FlushNanosAvgTime:float}, FsyncNanosNumOps=%{NUMBER:FsyncNanosNumOps:float}, FsyncNanosAvgTime=%{NUMBER:FsyncNanosAvgTime:float}, SendDataPacketBlockedOnNetworkNanosNumOps=%{NUMBER:SendDataPacketBlockedOnNetworkNanosNumOps:float}, SendDataPacketBlockedOnNetworkNanosAvgTime=%{NUMBER:SendDataPacketBlockedOnNetworkNanosAvgTime:float}, SendDataPacketTransferNanosNumOps=%{NUMBER:SendDataPacketTransferNanosNumOps:float}, SendDataPacketTransferNanosAvgTime=%{NUMBER:SendDataPacketTransferNanosAvgTime:float}"]

            #dfs.datanode(bis)
            match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: SessionId=%{WORD:SessionId}, Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, BytesWritten=%{NUMBER:BytesWritten:float}, TotalWriteTime=%{NUMBER:TotalWriteTime:float}, BytesRead=%{NUMBER:BytesRead:float}, TotalReadTime=%{NUMBER:TotalReadTime:float}, BlocksWritten=%{NUMBER:BlocksWritten:float}, BlocksRead=%{NUMBER:BlocksRead:float}, BlocksReplicated=%{NUMBER:BlocksReplicated:float}, BlocksRemoved=%{NUMBER:BlocksRemoved:float}, BlocksVerified=%{NUMBER:BlocksVerified:float}, BlockVerificationFailures=%{NUMBER:BlockVerificationFailures:float}, BlocksCached=%{NUMBER:BlocksCached:float}, BlocksUncached=%{NUMBER:BlocksUncached:float}, ReadsFromLocalClient=%{NUMBER:ReadsFromLocalClient:float}, ReadsFromRemoteClient=%{NUMBER:ReadsFromRemoteClient:float}, WritesFromLocalClient=%{NUMBER:WritesFromLocalClient:float}, WritesFromRemoteClient=%{NUMBER:WritesFromRemoteClient:float}, BlocksGetLocalPathInfo=%{NUMBER:BlocksGetLocalPathInfo:float}, RemoteBytesRead=%{NUMBER:RemoteBytesRead:float}, RemoteBytesWritten=%{NUMBER:RemoteBytesWritten:float}, RamDiskBlocksWrite=%{NUMBER:RamDiskBlocksWrite:float}, RamDiskBlocksWriteFallback=%{NUMBER:RamDiskBlocksWriteFallback:float}, RamDiskBytesWrite=%{NUMBER:RamDiskBytesWrite:float}, RamDiskBlocksReadHits=%{NUMBER:RamDiskBlocksReadHits:float}, RamDiskBlocksEvicted=%{NUMBER:RamDiskBlocksEvicted:float}, RamDiskBlocksEvictedWithoutRead=%{NUMBER:RamDiskBlocksEvictedWithoutRead:float}, RamDiskBlocksEvictionWindowMsNumOps=%{NUMBER:RamDiskBlocksEvictionWindowMsNumOps:float}, RamDiskBlocksEvictionWindowMsAvgTime=%{NUMBER:RamDiskBlocksEvictionWindowMsAvgTime:float}, RamDiskBlocksLazyPersisted=%{NUMBER:RamDiskBlocksLazyPersisted:float}, RamDiskBlocksDeletedBeforeLazyPersisted=%{NUMBER:RamDiskBlocksDeletedBeforeLazyPersisted:float}, RamDiskBytesLazyPersisted=%{NUMBER:RamDiskBytesLazyPersisted:float}, RamDiskBlocksLazyPersistWindowMsNumOps=%{NUMBER:RamDiskBlocksLazyPersistWindowMsNumOps:float}, RamDiskBlocksLazyPersistWindowMsAvgTime=%{NUMBER:RamDiskBlocksLazyPersistWindowMsAvgTime:float}, FsyncCount=%{NUMBER:FsyncCount:float}, VolumeFailures=%{NUMBER:VolumeFailures:float}, DatanodeNetworkErrors=%{NUMBER:DatanodeNetworkErrors:float}, ReadBlockOpNumOps=%{NUMBER:ReadBlockOpNumOps:float}, ReadBlockOpAvgTime=%{NUMBER:ReadBlockOpAvgTime:float}, WriteBlockOpNumOps=%{NUMBER:WriteBlockOpNumOps:float}, WriteBlockOpAvgTime=%{NUMBER:WriteBlockOpAvgTime:float}, BlockChecksumOpNumOps=%{NUMBER:BlockChecksumOpNumOps:float}, BlockChecksumOpAvgTime=%{NUMBER:BlockChecksumOpAvgTime:float}, CopyBlockOpNumOps=%{NUMBER:CopyBlockOpNumOps:float}, CopyBlockOpAvgTime=%{NUMBER:CopyBlockOpAvgTime:float}, ReplaceBlockOpNumOps=%{NUMBER:ReplaceBlockOpNumOps:float}, ReplaceBlockOpAvgTime=%{NUMBER:ReplaceBlockOpAvgTime:float}, HeartbeatsNumOps=%{NUMBER:HeartbeatsNumOps:float}, HeartbeatsAvgTime=%{NUMBER:HeartbeatsAvgTime:float}, BlockReportsNumOps=%{NUMBER:BlockReportsNumOps:float}, BlockReportsAvgTime=%{NUMBER:BlockReportsAvgTime:float}, IncrementalBlockReportsNumOps=%{NUMBER:IncrementalBlockReportsNumOps:float}, IncrementalBlockReportsAvgTime=%{NUMBER:IncrementalBlockReportsAvgTime:float}, CacheReportsNumOps=%{NUMBER:CacheReportsNumOps:float}, CacheReportsAvgTime=%{NUMBER:CacheReportsAvgTime:float}, PacketAckRoundTripTimeNanosNumOps=%{NUMBER:PacketAckRoundTripTimeNanosNumOps:float}, PacketAckRoundTripTimeNanosAvgTime=%{NUMBER:PacketAckRoundTripTimeNanosAvgTime:float}, FlushNanosNumOps=%{NUMBER:FlushNanosNumOps:float}, FlushNanosAvgTime=%{NUMBER:FlushNanosAvgTime:float}, FsyncNanosNumOps=%{NUMBER:FsyncNanosNumOps:float}, FsyncNanosAvgTime=%{NUMBER:FsyncNanosAvgTime:float}, SendDataPacketBlockedOnNetworkNanosNumOps=%{NUMBER:SendDataPacketBlockedOnNetworkNanosNumOps:float}, SendDataPacketBlockedOnNetworkNanosAvgTime=%{NUMBER:SendDataPacketBlockedOnNetworkNanosAvgTime:float}, SendDataPacketTransferNanosNumOps=%{NUMBER:SendDataPacketTransferNanosNumOps:float}, SendDataPacketTransferNanosAvgTime=%{NUMBER:SendDataPacketTransferNanosAvgTime:float}"]

            #rpc.rpc
            match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: port=%{NUMBER:port:int}, Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, ReceivedBytes=%{NUMBER:ReceivedBytes:float}, SentBytes=%{NUMBER:SentBytes:float}, RpcQueueTimeNumOps=%{NUMBER:RpcQueueTimeNumOps:float}, RpcQueueTimeAvgTime=%{NUMBER:RpcQueueTimeAvgTime:float}, RpcProcessingTimeNumOps=%{NUMBER:RpcProcessingTimeNumOps:float}, RpcProcessingTimeAvgTime=%{NUMBER:RpcProcessingTimeAvgTime:float}, RpcAuthenticationFailures=%{NUMBER:RpcAuthenticationFailures:float}, RpcAuthenticationSuccesses=%{NUMBER:RpcAuthenticationSuccesses:float}, RpcAuthorizationFailures=%{NUMBER:RpcAuthorizationFailures:float}, RpcAuthorizationSuccesses=%{NUMBER:RpcAuthorizationSuccesses:float}, NumOpenConnections=%{NUMBER:NumOpenConnections:float}, CallQueueLength=%{NUMBER:CallQueueLength:float}"]

            #rpc.rpc(bis)
            match=>["message", "\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: port=%{NUMBER:port:int}, Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, ReceivedBytes=%{NUMBER:ReceivedBytes:float}, SentBytes=%{NUMBER:SentBytes:float}, RpcQueueTimeNumOps=%{NUMBER:RpcQueueTimeNumOps:float}, RpcQueueTimeAvgTime=%{NUMBER:RpcQueueTimeAvgTime:float}, RpcProcessingTimeNumOps=%{NUMBER:RpcProcessingTimeNumOps:float}, RpcProcessingTimeAvgTime=%{NUMBER:RpcProcessingTimeAvgTime:float}, RpcAuthenticationFailures=%{NUMBER:RpcAuthenticationFailures:float}, RpcAuthenticationSuccesses=%{NUMBER:RpcAuthenticationSuccesses:float}, RpcAuthorizationFailures=%{NUMBER:RpcAuthorizationFailures:float}, RpcAuthorizationSuccesses=%{NUMBER:RpcAuthorizationSuccesses:float}, RpcClientBackoff=%{NUMBER:RpcClientBackoff:float}, NumOpenConnections=%{NUMBER:NumOpenConnections:float}, CallQueueLength=%{NUMBER:CallQueueLength:float}"]

            #rpcdetailed.rpcdetailed
            match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: port=%{NUMBER:port:int}, Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}"]
        }
    }

    if [type] == "datanode"{
        metrics{
            timer => ["events2","%{duration}"]
            add_tag => "metric2"
        }
    }

    if [type]=="resMng"{
        grok{
            break_on_match => false
            #yarn.QueueMetrics
             match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: Queue=%{USER:Queue}, Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, running_0=%{NUMBER:running_0:float}, running_60=%{NUMBER:running_60:float}, running_300=%{NUMBER:running_300:float}, running_1440=%{NUMBER:running_1440:float}, FairShareMB=%{NUMBER:FairShareMB:float}, FairShareVCores=%{NUMBER:FairShareVCores:float}, SteadyFairShareMB=%{NUMBER:SteadyFairShareMB:float}, SteadyFairShareVCores=%{NUMBER:SteadyFairShareVCores:float}, MinShareMB=%{NUMBER:MinShareMB:float}, MinShareVCores=%{NUMBER:MinShareVCores:float}, MaxShareMB=%{NUMBER:MaxShareMB:float}, MaxShareVCores=%{NUMBER:MaxShareVCores:float}, AppsSubmitted=%{NUMBER:AppsSubmitted:float}, AppsRunning=%{NUMBER:AppsRunning:float}, AppsPending=%{NUMBER:AppsPending:float}, AppsCompleted=%{NUMBER:AppsCompleted:float}, AppsKilled=%{NUMBER:AppsKilled:float}, AppsFailed=%{NUMBER:AppsFailed:float}, AllocatedMB=%{NUMBER:AllocatedMB:float}, AllocatedVCores=%{NUMBER:AllocatedVCores:float}, AllocatedContainers=%{NUMBER:AllocatedContainers:float}, AggregateContainersAllocated=%{NUMBER:AggregateContainersAllocated:float}, AggregateContainersReleased=%{NUMBER:AggregateContainersReleased:float}, AvailableMB=%{NUMBER:AvailableMB:float}, AvailableVCores=%{NUMBER:AvailableVCores:float}, PendingMB=%{NUMBER:PendingMB:float}, PendingVCores=%{NUMBER:PendingVCores:float}, PendingContainers=%{NUMBER:PendingContainers:float}, ReservedMB=%{NUMBER:ReservedMB:float}, ReservedVCores=%{NUMBER:ReservedVCores:float}, ReservedContainers=%{NUMBER:ReservedContainers:float}, ActiveUsers=%{NUMBER:ActiveUsers:float}, ActiveApplications=%{NUMBER:ActiveApplications:float}, AppAttemptFirstContainerAllocationDelayNumOps=%{NUMBER:AppAttemptFirstContainerAllocationDelayNumOps:float}, AppAttemptFirstContainerAllocationDelayAvgTime=%{NUMBER:AppAttemptFirstContainerAllocationDelayAvgTime:float}"]

             ##yarn.QueueMetrics(bis)
             match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: Queue=%{WORD:Queue}, User=%{WORD:user}, Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, running_0=%{NUMBER:running_0:float}, running_60=%{NUMBER:running_60:float}, running_300=%{NUMBER:running_300:float}, running_1440=%{NUMBER:running_1440:float}, AppsSubmitted=%{NUMBER:AppsSubmitted:float}, AppsRunning=%{NUMBER:AppsRunning:float}, AppsPending=%{NUMBER:AppsPending:float}, AppsCompleted=%{NUMBER:AppsCompleted:float}, AppsKilled=%{NUMBER:AppsKilled:float}, AppsFailed=%{NUMBER:AppsFailed:float}, AllocatedMB=%{NUMBER:AllocatedMB:float}, AllocatedVCores=%{NUMBER:AllocatedVCores:float}, AllocatedContainers=%{NUMBER:AllocatedContainers:float}, AggregateContainersAllocated=%{NUMBER:AggregateContainersAllocated:float}, AggregateContainersReleased=%{NUMBER:AggregateContainersReleased:float}, AvailableMB=%{NUMBER:AvailableMB:float}, AvailableVCores=%{NUMBER:AvailableVCores:float}, PendingMB=%{NUMBER:PendingMB}, PendingVCores=%{NUMBER:PendingVCores:float}, PendingContainers=%{NUMBER:PendingContainers:float}, ReservedMB=%{NUMBER:ReservedMB:float}, ReservedVCores=%{NUMBER:ReservedVCores:float}, ReservedContainers=%{NUMBER:ReservedContainers:float}, ActiveUsers=%{NUMBER:ActiveUsers:float}, ActiveApplications=%{NUMBER:ActiveApplications:float}, AppAttemptFirstContainerAllocationDelayNumOps=%{NUMBER:AppAttemptFirstContainerAllocationDelayNumOps:float}, AppAttemptFirstContainerAllocationDelayAvgTime=%{NUMBER:AppAttemptFirstContainerAllocationDelayAvgTime:float}"]

             #rpc.rpc
             match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: port=%{NUMBER:port:int}, Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, ReceivedBytes=%{NUMBER:ReceivedBytes:float}, SentBytes=%{NUMBER:SentBytes:float}, RpcQueueTimeNumOps=%{NUMBER:RpcQueueTimeNumOps:float}, RpcQueueTimeAvgTime=%{NUMBER:RpcQueueTimeAvgTime:float}, RpcProcessingTimeNumOps=%{NUMBER:RpcProcessingTimeNumOps:float}, RpcProcessingTimeAvgTime=%{NUMBER:RpcProcessingTimeAvgTime:float}, RpcAuthenticationFailures=%{NUMBER:RpcAuthenticationFailures:float}, RpcAuthenticationSuccesses=%{NUMBER:RpcAuthenticationSuccesses:float}, RpcAuthorizationFailures=%{NUMBER:RpcAuthorizationFailures:float}, RpcAuthorizationSuccesses=%{NUMBER:RpcAuthorizationSuccesses:float}, NumOpenConnections=%{NUMBER:NumOpenConnections:float}, CallQueueLength=%{NUMBER:CallQueueLength:float}"]

             #rpc.rpc(bis)
             match=>["message", "\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: port=%{NUMBER:port:int}, Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, ReceivedBytes=%{NUMBER:ReceivedBytes:float}, SentBytes=%{NUMBER:SentBytes:float}, RpcQueueTimeNumOps=%{NUMBER:RpcQueueTimeNumOps:float}, RpcQueueTimeAvgTime=%{NUMBER:RpcQueueTimeAvgTime:float}, RpcProcessingTimeNumOps=%{NUMBER:RpcProcessingTimeNumOps:float}, RpcProcessingTimeAvgTime=%{NUMBER:RpcProcessingTimeAvgTime:float}, RpcAuthenticationFailures=%{NUMBER:RpcAuthenticationFailures:float}, RpcAuthenticationSuccesses=%{NUMBER:RpcAuthenticationSuccesses:float}, RpcAuthorizationFailures=%{NUMBER:RpcAuthorizationFailures:float}, RpcAuthorizationSuccesses=%{NUMBER:RpcAuthorizationSuccesses:float}, RpcClientBackoff=%{NUMBER:RpcClientBackoff:float}, NumOpenConnections=%{NUMBER:NumOpenConnections:float}, CallQueueLength=%{NUMBER:CallQueueLength:float}"]

             #rpcdetailed
             match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: port=%{NUMBER:port:int}, Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, RegisterNodeManagerNumOps=%{NUMBER:RegisterNodeManagerNumOps:float}, RegisterNodeManagerAvgTime=%{NUMBER:RegisterNodeManagerAvgTime:float}, NodeHeartbeatNumOps=%{NUMBER:NodeHeartbeatNumOps:float}, NodeHeartbeatAvgTime=%{NUMBER:NodeHeartbeatAvgTime:float}"]

             #rpcdetailed (bis)
             match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: port=%{NUMBER:port:int}, Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, GetFileInfoNumOps=%{NUMBER:GetFileInfoNumOps:float}, GetFileInfoAvgTime=%{NUMBER:GetFileInfoAvgTime:float}, GetListingNumOps=%{NUMBER:GetListingNumOps:float}, GetListingAvgTime=%{NUMBER:GetListingAvgTime:float}, ListCacheDirectivesNumOps=%{NUMBER:ListCacheDirectivesNumOps:float}, ListCacheDirectivesAvgTime=%{NUMBER:ListCacheDirectivesAvgTime:float}, ListCachePoolsNumOps=%{NUMBER:ListCachePoolsNumOps:float}, ListCachePoolsAvgTime=%{NUMBER:ListCachePoolsAvgTime:float}, SafeModeExceptionNumOps=%{NUMBER:SafeModeExceptionNumOps:float}, SafeModeExceptionAvgTime=%{NUMBER:SafeModeExceptionAvgTime:float}, CreateNumOps=%{NUMBER:CreateNumOps:float}, CreateAvgTime=%{NUMBER:CreateAvgTime:float}, AddBlockNumOps=%{NUMBER:AddBlockNumOps:float}, AddBlockAvgTime=%{NUMBER:AddBlockAvgTime:float}, GetServerDefaultsNumOps=%{NUMBER:GetServerDefaultsNumOps:float}, GetServerDefaultsAvgTime=%{NUMBER:GetServerDefaultsAvgTime:float}, CompleteNumOps=%{NUMBER:CompleteNumOps:float}, CompleteAvgTime=%{NUMBER:CompleteAvgTime:float}, GetBlockLocationsNumOps=%{NUMBER:GetBlockLocationsNumOps:float}, GetBlockLocationsAvgTime=%{NUMBER:GetBlockLocationsAvgTime:float}, DeleteNumOps=%{NUMBER:DeleteNumOps:float}, DeleteAvgTime=%{NUMBER:DeleteAvgTime:float}"]

             #rpcdetailed (bis2)
             match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: port=%{NUMBER:port:int}, Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, GetNewApplicationNumOps=%{NUMBER:GetNewApplicationNumOps:float}, GetNewApplicationAvgTime=%{NUMBER:GetNewApplicationAvgTime:float}, SubmitApplicationNumOps=%{NUMBER:SubmitApplicationNumOps:float}, SubmitApplicationAvgTime=%{NUMBER:SubmitApplicationAvgTime:float}, GetApplicationReportNumOps=%{NUMBER:GetApplicationReportNumOps:float}, GetApplicationReportAvgTime=%{NUMBER:GetApplicationReportAvgTime:float}, ApplicationNotFoundExceptionNumOps=%{NUMBER:ApplicationNotFoundExceptionNumOps:float}, ApplicationNotFoundExceptionAvgTime=%{NUMBER:ApplicationNotFoundExceptionAvgTime:float}"]

             #metricssystem.MetricsSystem
             match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, NumActiveSources=%{NUMBER:NumActiveSources:float}, NumAllSources=%{NUMBER:NumAllSources:float}, NumActiveSinks=%{NUMBER:NumActiveSinks:float}, NumAllSinks=%{NUMBER:NumAllSinks:float}, Sink_diceNumOps=%{NUMBER:Sink_diceNumOps:float}, Sink_diceAvgTime=%{NUMBER:Sink_diceAvgTime:float}, Sink_diceDropped=%{NUMBER:Sink_diceDropped:float}, Sink_diceQsize=%{NUMBER:Sink_diceQsize:float}, SnapshotNumOps=%{NUMBER:SnapshotNumOps:float}, SnapshotAvgTime=%{NUMBER:SnapshotAvgTime:float}, PublishNumOps=%{NUMBER:PublishNumOps:float}, PublishAvgTime=%{NUMBER:PublishAvgTime:float}, DroppedPubAll=%{NUMBER: DroppedPubAll}"]

             #ugi.UgiMetrics
             match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, LoginSuccessNumOps=%{NUMBER:LoginSuccessNumOps:float}, LoginSuccessAvgTime=%{NUMBER:LoginSuccessAvgTime:float}, LoginFailureNumOps=%{NUMBER:LoginFailureNumOps:float}, LoginFailureAvgTime=%{NUMBER:LoginFailureAvgTime:float}, GetGroupsNumOps=%{NUMBER:GetGroupsNumOps:float}, GetGroupsAvgTime=%{NUMBER:GetGroupsAvgTime:float}"]

             #jvm.JvmMetrics
             match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: Context=%{WORD:context}, ProcessName=%{WORD:ProcessName}, SessionId=%{WORD:SessionId}, Hostname=%{HOSTNAME:hostname}, MemNonHeapUsedM=%{NUMBER:MemNonHeapUsedM:float}, MemNonHeapCommittedM=%{NUMBER:MemNonHeapCommittedM:float}, MemNonHeapMaxM=%{NUMBER:MemNonHeapMaxM:float}, MemHeapUsedM=%{NUMBER:MemHeapUsedM:float}, MemHeapCommittedM=%{NUMBER:MemHeapCommittedM:float}, MemHeapMaxM=%{NUMBER:MemHeapMaxM:float}, MemMaxM=%{NUMBER:MemMaxM:float}, GcCountParNew=%{NUMBER:GcCountParNew:float}, GcTimeMillisParNew=%{NUMBER:GcTimeMillisParNew:float}, GcCountConcurrentMarkSweep=%{NUMBER:GcCountConcurrentMarkSweep:float}, GcTimeMillisConcurrentMarkSweep=%{NUMBER:GcTimeMillisConcurrentMarkSweep:float}, GcCount=%{NUMBER:GcCount:float}, GcTimeMillis=%{NUMBER:GcTimeMillis:float}, ThreadsNew=%{NUMBER:ThreadsNew:float}, ThreadsRunnable=%{NUMBER:ThreadsRunnable:float}, ThreadsBlocked=%{NUMBER:ThreadsBlocked:float}, ThreadsWaiting=%{NUMBER:ThreadsWaiting:float}, ThreadsTimedWaiting=%{NUMBER:ThreadsTimedWaiting:float}, ThreadsTerminated=%{NUMBER:ThreadsTerminated:float}, LogFatal=%{NUMBER:LogFatal:float}, LogError=%{NUMBER:LogError:float}, LogWarn=%{NUMBER:LogWarn:float}, LogInfo=%{NUMBER:LogInfo:float}"]

             #yarn.ClusterMetrics
             match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: ClusterMetrics=%{WORD:ClusterMetrics}, Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, NumActiveNMs=%{NUMBER:NumActiveNMs:float}, NumDecommissionedNMs=%{NUMBER:NumDecommissionedNMs:float}, NumLostNMs=%{NUMBER:NumLostNMs:float}, NumUnhealthyNMs=%{NUMBER:NumUnhealthyNMs:float}, NumRebootedNMs=%{NUMBER:NumRebootedNMs:float}, AMLaunchDelayNumOps=%{NUMBER:AMLaunchDelayNumOps:float}, AMLaunchDelayAvgTime=%{NUMBER:AMLaunchDelayAvgTime:float}, AMRegisterDelayNumOps=%{NUMBER:AMRegisterDelayNumOps:float}, AMRegisterDelayAvgTime=%{NUMBER:AMRegisterDelayAvgTime:float}"]

             #fairscheduler-op-durations.FSOpDurations
             match=>["message","\A%{NUMBER:job_id} %{NOTSPACE:serviceType}.%{WORD:serviceMetrics}: FSOpDurations=FSOpDurations, Context=%{NOTSPACE:context}, Hostname=%{HOSTNAME}, ContinuousSchedulingRunNumOps=%{NUMBER:ContinuousSchedulingRunNumOps:float}, ContinuousSchedulingRunAvgTime=%{NUMBER:ContinuousSchedulingRunAvgTime:float}, ContinuousSchedulingRunStdevTime=%{NUMBER:ContinuousSchedulingRunStdevTime:float}, ContinuousSchedulingRunIMinTime=%{NUMBER:ContinuousSchedulingRunIMinTime:float}, ContinuousSchedulingRunIMaxTime=%{NUMBER:ContinuousSchedulingRunIMaxTime:float}, ContinuousSchedulingRunMinTime=%{NUMBER:ContinuousSchedulingRunMinTime:float}, ContinuousSchedulingRunMaxTime=%{NUMBER:ContinuousSchedulingRunMaxTime:float}, NodeUpdateCallNumOps=%{NUMBER:NodeUpdateCallNumOps:float}, NodeUpdateCallAvgTime=%{NUMBER:NodeUpdateCallAvgTime:float}, NodeUpdateCallStdevTime=%{NUMBER:NodeUpdateCallStdevTime:float}, NodeUpdateCallIMinTime=%{NUMBER:NodeUpdateCallIMinTime:float}, NodeUpdateCallIMaxTime=%{NOTSPACE:NodeUpdateCallIMaxTime:float}, NodeUpdateCallMinTime=%{NUMBER:NodeUpdateCallMinTime:float}, NodeUpdateCallMaxTime=%{NUMBER:NodeUpdateCallMaxTime:float}, UpdateThreadRunNumOps=%{NUMBER:UpdateThreadRunNumOps:float}, UpdateThreadRunAvgTime=%{NUMBER:UpdateThreadRunAvgTime:float}, UpdateThreadRunStdevTime=%{NUMBER:UpdateThreadRunStdevTime:float}, UpdateThreadRunIMinTime=%{NUMBER:UpdateThreadRunIMinTime:float}, UpdateThreadRunIMaxTime=%{NUMBER:UpdateThreadRunIMaxTime:float}, UpdateThreadRunMinTime=%{NUMBER:UpdateThreadRunMinTime:float}, UpdateThreadRunMaxTime=%{NUMBER:UpdateThreadRunMaxTime:float}, UpdateCallNumOps=%{NUMBER:UpdateCallNumOps:float}, UpdateCallAvgTime=%{NUMBER:UpdateCallAvgTime:float}, UpdateCallStdevTime=%{NUMBER:UpdateCallStdevTime:float}, UpdateCallIMinTime=%{NUMBER:UpdateCallIMinTime:float}, UpdateCallIMaxTime=%{NUMBER:UpdateCallIMaxTime:float}, UpdateCallMinTime=%{NUMBER:UpdateCallMinTime:float}, UpdateCallMaxTime=%{NUMBER:UpdateCallMaxTime:float}, PreemptCallNumOps=%{NUMBER:PreemptCallNumOps:float}, PreemptCallAvgTime=%{NUMBER:PreemptCallAvgTime:float}, PreemptCallStdevTime=%{NUMBER:PreemptCallStdevTime:float}, PreemptCallIMinTime=%{NOTSPACE:PreemptCallIMinTime:float}, PreemptCallIMaxTime=%{NOTSPACE:PreemptCallIMaxTime:float}, PreemptCallMinTime=%{NOTSPACE:PreemptCallMinTime:float}, PreemptCallMaxTime=%{NOTSPACE:PreemptCallMaxTime:float}"]

             #fairscheduler-op-duration.FSOpDurations(bis)
             #match=>["message","\A%{NUMBER:job_id} %{NOTSPACE:serviceType}.%{WORD:serviceMetrics}: FSOpDurations=FSOpDurations, Context=%{NOTSPACE:context}, Hostname=%{HOSTNAME}, ContinuousSchedulingRunNumOps=%{NUMBER:ContinuousSchedulingRunNumOps:float}, ContinuousSchedulingRunAvgTime=%{NUMBER:ContinuousSchedulingRunAvgTime:float}, ContinuousSchedulingRunStdevTime=%{NUMBER:ContinuousSchedulingRunStdevTime:float}, ContinuousSchedulingRunIMinTime=%{NUMBER:ContinuousSchedulingRunIMinTime:float}, ContinuousSchedulingRunIMaxTime=%{NUMBER:ContinuousSchedulingRunIMaxTime:float}, ContinuousSchedulingRunMinTime=%{NUMBER:ContinuousSchedulingRunMinTime:float}, ContinuousSchedulingRunMaxTime=%{NUMBER:ContinuousSchedulingRunMaxTime:float}, ContinuousSchedulingRunINumOps=%{NUMBER:ContinuousSchedulingRunINumOps:float}, NodeUpdateCallNumOps=%{NUMBER:NodeUpdateCallNumOps:float}, NodeUpdateCallAvgTime=%{NUMBER:NodeUpdateCallAvgTime:float}, NodeUpdateCallStdevTime=%{NUMBER:NodeUpdateCallStdevTime:float}, NodeUpdateCallIMinTime=%{NUMBER:NodeUpdateCallIMinTime:float}, NodeUpdateCallIMaxTime=%{NUMBER:NodeUpdateCallIMaxTime:float}, NodeUpdateCallMinTime=%{NUMBER:NodeUpdateCallMinTime:float}, NodeUpdateCallMaxTime=%{NUMBER:NodeUpdateCallMaxTime:float}, NodeUpdateCallINumOps=%{NUMBER:NodeUpdateCallINumOps:float}, UpdateThreadRunNumOps=%{NUMBER:UpdateThreadRunNumOps:float}, UpdateThreadRunAvgTime=%{NUMBER:UpdateThreadRunAvgTime:float}, UpdateThreadRunStdevTime=%{NUMBER:UpdateThreadRunStdevTime:float}, UpdateThreadRunIMinTime=%{NUMBER:UpdateThreadRunIMinTime:float}, UpdateThreadRunIMaxTime=%{NUMBER:UpdateThreadRunIMaxTime:float}, UpdateThreadRunMinTime=%{NUMBER:UpdateThreadRunMinTime:float}, UpdateThreadRunMaxTime=%{NUMBER:UpdateThreadRunMaxTime:float}, UpdateThreadRunINumOps=%{NUMBER:UpdateThreadRunINumOps:float}, UpdateCallNumOps=%{NUMBER:UpdateCallNumOps:float}, UpdateCallAvgTime=%{NUMBER:UpdateCallAvgTime:float}, UpdateCallStdevTime=%{NUMBER:UpdateCallStdevTime:float}, UpdateCallIMinTime=%{NUMBER:UpdateCallIMinTime:float}, UpdateCallIMaxTime=%{NUMBER:UpdateCallIMaxTime:float}, UpdateCallMinTime=%{NUMBER:UpdateCallMinTime:float}, UpdateCallMaxTime=%{NUMBER:UpdateCallMaxTime:float}, UpdateCallINumOps=%{NUMBER:UpdateCallINumOps:float}, PreemptCallNumOps=%{NUMBER:PreemptCallNumOps:float}, PreemptCallAvgTime=%{NUMBER:PreemptCallAvgTime:float}, PreemptCallStdevTime=%{NUMBER:PreemptCallStdevTime:float}, PreemptCallIMinTime=%{BASE16FLOAT:PreemptCallIMinTime}, PreemptCallIMaxTime=%{NOTSPACE:PreemptCallIMaxTime}, PreemptCallMinTime=%{BASE16FLOAT:PreemptCallMinTime}, PreemptCallMaxTime=%{NOTSPACE:PreemptCallMaxTime}, PreemptCallINumOps=%{NUMBER:PreemptCallINumOps:float}"]

             #fairscheduler-op-duration.FSOpDurations(bis1)
             match=>["message","\A%{NUMBER:job_id} %{NOTSPACE:serviceType}.%{WORD:serviceMetrics}: FSOpDurations=FSOpDurations, Context=%{NOTSPACE:context}, Hostname=%{HOSTNAME}, ContinuousSchedulingRunNumOps=%{NUMBER:ContinuousSchedulingRunNumOps:float}, ContinuousSchedulingRunAvgTime=%{NUMBER:ContinuousSchedulingRunAvgTime:float}, ContinuousSchedulingRunStdevTime=%{NUMBER:ContinuousSchedulingRunStdevTime:float}, ContinuousSchedulingRunIMinTime=%{NUMBER:ContinuousSchedulingRunIMinTime:float}, ContinuousSchedulingRunIMaxTime=%{NUMBER:ContinuousSchedulingRunIMaxTime:float}, ContinuousSchedulingRunMinTime=%{NUMBER:ContinuousSchedulingRunMinTime:float}, ContinuousSchedulingRunMaxTime=%{NUMBER:ContinuousSchedulingRunMaxTime:float}, ContinuousSchedulingRunINumOps=%{NUMBER:ContinuousSchedulingRunINumOps:float}, NodeUpdateCallNumOps=%{NUMBER:NodeUpdateCallNumOps:float}, NodeUpdateCallAvgTime=%{NUMBER:NodeUpdateCallAvgTime:float}, NodeUpdateCallStdevTime=%{NUMBER:NodeUpdateCallStdevTime:float}, NodeUpdateCallIMinTime=%{NUMBER:NodeUpdateCallIMinTime:float}, NodeUpdateCallIMaxTime=%{NOTSPACE:NodeUpdateCallIMaxTime}, NodeUpdateCallMinTime=%{NUMBER:NodeUpdateCallMinTime:float}, NodeUpdateCallMaxTime=%{NUMBER:NodeUpdateCallMaxTime:float}, NodeUpdateCallINumOps=%{NUMBER:NodeUpdateCallINumOps:float}, UpdateThreadRunNumOps=%{NUMBER:UpdateThreadRunNumOps:float}, UpdateThreadRunAvgTime=%{NUMBER:UpdateThreadRunAvgTime:float}, UpdateThreadRunStdevTime=%{NUMBER:UpdateThreadRunStdevTime:float}, UpdateThreadRunIMinTime=%{NUMBER:UpdateThreadRunIMinTime:float}, UpdateThreadRunIMaxTime=%{NOTSPACE:UpdateThreadRunIMaxTime}, UpdateThreadRunMinTime=%{NUMBER:UpdateThreadRunMinTime:float}, UpdateThreadRunMaxTime=%{NUMBER:UpdateThreadRunMaxTime:float}, UpdateThreadRunINumOps=%{NUMBER:UpdateThreadRunINumOps:float}, UpdateCallNumOps=%{NUMBER:UpdateCallNumOps:float}, UpdateCallAvgTime=%{NUMBER:UpdateCallAvgTime:float}, UpdateCallStdevTime=%{NUMBER:UpdateCallStdevTime:float}, UpdateCallIMinTime=%{NUMBER:UpdateCallIMinTime:float}, UpdateCallIMaxTime=%{NOTSPACE:UpdateCallIMaxTime}, UpdateCallMinTime=%{NUMBER:UpdateCallMinTime:float}, UpdateCallMaxTime=%{NUMBER:UpdateCallMaxTime:float}, UpdateCallINumOps=%{NUMBER:UpdateCallINumOps:float}, PreemptCallNumOps=%{NUMBER:PreemptCallNumOps:float}, PreemptCallAvgTime=%{NUMBER:PreemptCallAvgTime:float}, PreemptCallStdevTime=%{NUMBER:PreemptCallStdevTime:float}, PreemptCallIMinTime=%{BASE16FLOAT:PreemptCallIMinTime}, PreemptCallIMaxTime=%{NOTSPACE:PreemptCallIMaxTime}, PreemptCallMinTime=%{BASE16FLOAT:PreemptCallMinTime}, PreemptCallMaxTime=%{NOTSPACE:PreemptCallMaxTime}, PreemptCallINumOps=%{NUMBER:PreemptCallINumOps:float}"]
        }
    }

    if [type] == "resMng"{
        metrics{
            timer => ["events3","%{duration}"]
            add_tag => "mresMng"
        }
    }


    if [type]=="nameNode"{
        grok{
            break_on_match => false
            #dfs.namenode
             match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: ProcessName=%{WORD:ProcessName}, SessionId=%{WORD:SessionId}, Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, CreateFileOps=%{NUMBER:CreateFileOps:float}, FilesCreated=%{NUMBER:FilesCreated:float}, FilesAppended=%{NUMBER:FilesAppended:float}, GetBlockLocations=%{NUMBER:GetBlockLocations:float}, FilesRenamed=%{NUMBER:FilesRenamed:float}, GetListingOps=%{NUMBER:GetListingOps:float}, DeleteFileOps=%{NUMBER:DeleteFileOps:float}, FilesDeleted=%{NUMBER:FilesDeleted:float}, FileInfoOps=%{NUMBER:FileInfoOps:float}, AddBlockOps=%{NUMBER:AddBlockOps:float}, GetAdditionalDatanodeOps=%{NUMBER:GetAdditionalDatanodeOps:float}, CreateSymlinkOps=%{NUMBER:CreateSymlinkOps:float}, GetLinkTargetOps=%{NUMBER:GetLinkTargetOps:float}, FilesInGetListingOps=%{NUMBER:FilesInGetListingOps:float}, AllowSnapshotOps=%{NUMBER:AllowSnapshotOps:float}, DisallowSnapshotOps=%{NUMBER:DisallowSnapshotOps:float}, CreateSnapshotOps=%{NUMBER:CreateSnapshotOps:float}, DeleteSnapshotOps=%{NUMBER:DeleteSnapshotOps:float}, RenameSnapshotOps=%{NUMBER:RenameSnapshotOps:float}, ListSnapshottableDirOps=%{NUMBER:ListSnapshottableDirOps:float}, SnapshotDiffReportOps=%{NUMBER:SnapshotDiffReportOps:float}, BlockReceivedAndDeletedOps=%{NUMBER:BlockReceivedAndDeletedOps:float}, StorageBlockReportOps=%{NUMBER:StorageBlockReportOps:float}, TransactionsNumOps=%{NUMBER:TransactionsNumOps:float}, TransactionsAvgTime=%{NUMBER:TransactionsAvgTime:float}, SyncsNumOps=%{NUMBER:SyncsNumOps:float}, SyncsAvgTime=%{NUMBER:SyncsAvgTime:float}, TransactionsBatchedInSync=%{NUMBER:TransactionsBatchedInSync:float}, BlockReportNumOps=%{NUMBER:BlockReportNumOps:float}, BlockReportAvgTime=%{NUMBER:BlockReportAvgTime:float}, CacheReportNumOps=%{NUMBER:CacheReportNumOps:float}, CacheReportAvgTime=%{NUMBER:CacheReportAvgTime:float}, SafeModeTime=%{NUMBER:SafeModeTime:float}, FsImageLoadTime=%{NUMBER:FsImageLoadTime:float}, GetEditNumOps=%{NUMBER:GetEditNumOps:float}, GetEditAvgTime=%{NUMBER:GetEditAvgTime:float}, GetImageNumOps=%{NUMBER:GetImageNumOps:float}, GetImageAvgTime=%{NUMBER:GetImageAvgTime:float}, PutImageNumOps=%{NUMBER:PutImageNumOps:float}, PutImageAvgTime=%{NUMBER:PutImageAvgTime:float}"]

             #default.StartupProgress
             match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: Hostname=%{HOSTNAME:hostname}, ElapsedTime=%{NUMBER:ElapsedTime:float}, PercentComplete=%{NUMBER:PercentComplete:float}, LoadingFsImageCount=%{NUMBER:LoadingFsImageCount:float}, LoadingFsImageElapsedTime=%{NUMBER:LoadingFsImageElapsedTime:float}, LoadingFsImageTotal=%{NUMBER:LoadingFsImageTotal:float}, LoadingFsImagePercentComplete=%{NUMBER:LoadingFsImagePercentComplete:float}, LoadingEditsCount=%{NUMBER:LoadingEditsCount:float}, LoadingEditsElapsedTime=%{NUMBER:LoadingEditsElapsedTime:float}, LoadingEditsTotal=%{NUMBER:LoadingEditsTotal:float}, LoadingEditsPercentComplete=%{NUMBER:LoadingEditsPercentComplete:float}, SavingCheckpointCount=%{NUMBER:SavingCheckpointCount:float}, SavingCheckpointElapsedTime=%{NUMBER:SavingCheckpointElapsedTime:float}, SavingCheckpointTotal=%{NUMBER:SavingCheckpointTotal:float}, SavingCheckpointPercentComplete=%{NUMBER:SavingCheckpointPercentComplete:float}, SafeModeCount=%{NUMBER:SafeModeCount:float}, SafeModeElapsedTime=%{NUMBER:SafeModeElapsedTime:float}, SafeModeTotal=%{NUMBER:SafeModeTotal:float}, SafeModePercentComplete=%{NUMBER:SafeModePercentComplete:float}"]

             #rpc.RetryCache.NameNodeRetryCache
             match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}.%{WORD:serviceMetrics2}: Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, CacheHit=%{NUMBER:CacheHit:float}, CacheCleared=%{NUMBER:CacheCleared:float}, CacheUpdated=%{NUMBER:CacheUpdated:float}"]

             #rpc.rpc
             match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: port=%{NUMBER:port:int}, Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, ReceivedBytes=%{NUMBER:ReceivedBytes:float}, SentBytes=%{NUMBER:SentBytes:float}, RpcQueueTimeNumOps=%{NUMBER:RpcQueueTimeNumOps:float}, RpcQueueTimeAvgTime=%{NUMBER:RpcQueueTimeAvgTime:float}, RpcProcessingTimeNumOps=%{NUMBER:RpcProcessingTimeNumOps:float}, RpcProcessingTimeAvgTime=%{NUMBER:RpcProcessingTimeAvgTime:float}, RpcAuthenticationFailures=%{NUMBER:RpcAuthenticationFailures:float}, RpcAuthenticationSuccesses=%{NUMBER:RpcAuthenticationSuccesses:float}, RpcAuthorizationFailures=%{NUMBER:RpcAuthorizationFailures:float}, RpcAuthorizationSuccesses=%{NUMBER:RpcAuthorizationSuccesses:float}, NumOpenConnections=%{NUMBER:NumOpenConnections:float}, CallQueueLength=%{NUMBER:CallQueueLength:float}"]

             #rpc.rpc(bis)
             match=>["message", "\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: port=%{NUMBER:port:int}, Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, ReceivedBytes=%{NUMBER:ReceivedBytes:float}, SentBytes=%{NUMBER:SentBytes:float}, RpcQueueTimeNumOps=%{NUMBER:RpcQueueTimeNumOps:float}, RpcQueueTimeAvgTime=%{NUMBER:RpcQueueTimeAvgTime:float}, RpcProcessingTimeNumOps=%{NUMBER:RpcProcessingTimeNumOps:float}, RpcProcessingTimeAvgTime=%{NUMBER:RpcProcessingTimeAvgTime:float}, RpcAuthenticationFailures=%{NUMBER:RpcAuthenticationFailures:float}, RpcAuthenticationSuccesses=%{NUMBER:RpcAuthenticationSuccesses:float}, RpcAuthorizationFailures=%{NUMBER:RpcAuthorizationFailures:float}, RpcAuthorizationSuccesses=%{NUMBER:RpcAuthorizationSuccesses:float}, RpcClientBackoff=%{NUMBER:RpcClientBackoff:float}, NumOpenConnections=%{NUMBER:NumOpenConnections:float}, CallQueueLength=%{NUMBER:CallQueueLength:float}"]

             #rpcdetailed.rpcdetailed
             match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: port=%{NUMBER:port:int}, Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, IOExceptionNumOps=%{NUMBER:IOExceptionNumOps}, IOExceptionAvgTime=%{NUMBER:IOExceptionAvgTime}, VersionRequestNumOps=%{NUMBER:VersionRequestNumOps}, VersionRequestAvgTime=%{NUMBER:VersionRequestAvgTime}, RegisterDatanodeNumOps=%{NUMBER:RegisterDatanodeNumOps}, RegisterDatanodeAvgTime=%{NUMBER:RegisterDatanodeAvgTime}, SendHeartbeatNumOps=%{NUMBER:SendHeartbeatNumOps}, SendHeartbeatAvgTime=%{NUMBER:SendHeartbeatAvgTime}, BlockReportNumOps=%{NUMBER:BlockReportNumOps}, BlockReportAvgTime=%{NUMBER:BlockReportAvgTime}, CacheReportNumOps=%{NUMBER:CacheReportNumOps}, CacheReportAvgTime=%{NUMBER:CacheReportAvgTime}, GetTransactionIdNumOps=%{NUMBER:GetTransactionIdNumOps}, GetTransactionIdAvgTime=%{NUMBER:GetTransactionIdAvgTime}, BlockReceivedAndDeletedNumOps=%{NUMBER:BlockReceivedAndDeletedNumOps}, BlockReceivedAndDeletedAvgTime=%{NUMBER:BlockReceivedAndDeletedAvgTime}, RollEditLogNumOps=%{NUMBER:RollEditLogNumOps}, RollEditLogAvgTime=%{NUMBER:RollEditLogAvgTime}, GetEditLogManifestNumOps=%{NUMBER:GetEditLogManifestNumOps}, GetEditLogManifestAvgTime=%{NUMBER:GetEditLogManifestAvgTime}"]

             #rpcdetailed.rpcdetailed (bis)
             match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: port=%{NUMBER:port}, Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, GetFileInfoNumOps=%{NUMBER:GetFileInfoNumOps:float}, GetFileInfoAvgTime=%{NUMBER:GetFileInfoAvgTime:float}, GetListingNumOps=%{NUMBER:GetListingNumOps:float}, GetListingAvgTime=%{NUMBER:GetListingAvgTime:float}, SafeModeExceptionNumOps=%{NUMBER:SafeModeExceptionNumOps:float}, SafeModeExceptionAvgTime=%{NUMBER:SafeModeExceptionAvgTime:float}, DeleteNumOps=%{NUMBER:DeleteNumOps:float}, DeleteAvgTime=%{NUMBER:DeleteAvgTime:float}, ListCacheDirectivesNumOps=%{NUMBER:ListCacheDirectivesNumOps:float}, ListCacheDirectivesAvgTime=%{NUMBER:ListCacheDirectivesAvgTime:float}, ListCachePoolsNumOps=%{NUMBER:ListCachePoolsNumOps:float}, ListCachePoolsAvgTime=%{NUMBER:ListCachePoolsAvgTime:float}, CreateNumOps=%{NUMBER:CreateNumOps:float}, CreateAvgTime=%{NUMBER:CreateAvgTime:float}, AddBlockNumOps=%{NUMBER:AddBlockNumOps:float}, AddBlockAvgTime=%{NUMBER:AddBlockAvgTime:float}, GetServerDefaultsNumOps=%{NUMBER:GetServerDefaultsNumOps:float}, GetServerDefaultsAvgTime=%{NUMBER:GetServerDefaultsAvgTime:float}, CompleteNumOps=%{NUMBER:CompleteNumOps:float}, CompleteAvgTime=%{NUMBER:CompleteAvgTime:float}, GetBlockLocationsNumOps=%{NUMBER:GetBlockLocationsNumOps:float}, GetBlockLocationsAvgTime=%{NUMBER:GetBlockLocationsAvgTime:float}"]

             #rpcdetailed.rpcdetailed (bis2)
             match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: port=%{NUMBER:port:int}, Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}"]

             #dfs.FSNamesystem
             match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: Context=%{WORD:context}, HAState=%{WORD:HAState}, Hostname=%{HOSTNAME:hostname}, MissingBlocks=%{NUMBER:MissingBlocks:float}, MissingReplOneBlocks=%{NUMBER:MissingReplOneBlocks:float}, ExpiredHeartbeats=%{NUMBER:ExpiredHeartbeats:float}, TransactionsSinceLastCheckpoint=%{NUMBER:TransactionsSinceLastCheckpoint:float}, TransactionsSinceLastLogRoll=%{NUMBER:TransactionsSinceLastLogRoll:float}, LastWrittenTransactionId=%{NUMBER:LastWrittenTransactionId:float}, LastCheckpointTime=%{NUMBER:LastCheckpointTime:float}, CapacityTotal=%{NUMBER:CapacityTotal:float}, CapacityTotalGB=%{NUMBER:CapacityTotalGB:float}, CapacityUsed=%{NUMBER:CapacityUsed:float}, CapacityUsedGB=%{NUMBER:CapacityUsedGB:float}, CapacityRemaining=%{NUMBER:CapacityRemaining:float}, CapacityRemainingGB=%{NUMBER:CapacityRemainingGB:float}, CapacityUsedNonDFS=%{NUMBER:CapacityUsedNonDFS:float}, TotalLoad=%{NUMBER:TotalLoad:float}, SnapshottableDirectories=%{NUMBER:SnapshottableDirectories:float}, Snapshots=%{NUMBER:Snapshots:float}, BlocksTotal=%{NUMBER:BlocksTotal:float}, FilesTotal=%{NUMBER:FilesTotal:float}, PendingReplicationBlocks=%{NUMBER:PendingReplicationBlocks:float}, UnderReplicatedBlocks=%{NUMBER:UnderReplicatedBlocks:float}, CorruptBlocks=%{NUMBER:CorruptBlocks:float}, ScheduledReplicationBlocks=%{NUMBER:ScheduledReplicationBlocks:float}, PendingDeletionBlocks=%{NUMBER:PendingDeletionBlocks:float}, ExcessBlocks=%{NUMBER:ExcessBlocks:float}, PostponedMisreplicatedBlocks=%{NUMBER:PostponedMisreplicatedBlocks:float}, PendingDataNodeMessageCount=%{NUMBER:PendingDataNodeMessageCount:float}, MillisSinceLastLoadedEdits=%{NUMBER:MillisSinceLastLoadedEdits:float}, BlockCapacity=%{NUMBER:BlockCapacity:float}, StaleDataNodes=%{NUMBER:StaleDataNodes:float}, TotalFiles=%{NUMBER:TotalFiles:float}"]

             #dfs.FSNamesystem(bis)
             match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: Context=%{WORD:context}, HAState=%{WORD:HAState}, Hostname=%{HOSTNAME:hostname}, BlocksTotal=%{NUMBER:BlocksTotal:float}, MissingBlocks=%{NUMBER:MissingBlocks:float}, MissingReplOneBlocks=%{NUMBER:MissingReplOneBlocks:float}, ExpiredHeartbeats=%{NUMBER:ExpiredHeartbeats:float}, TransactionsSinceLastCheckpoint=%{NUMBER:TransactionsSinceLastCheckpoint:float}, TransactionsSinceLastLogRoll=%{NUMBER:TransactionsSinceLastLogRoll:float}, LastWrittenTransactionId=%{NUMBER:LastWrittenTransactionId:float}, LastCheckpointTime=%{NUMBER:LastCheckpointTime:float}, UnderReplicatedBlocks=%{NUMBER:UnderReplicatedBlocks:float}, CorruptBlocks=%{NUMBER:CorruptBlocks:float}, CapacityTotal=%{NUMBER:CapacityTotal:float}, CapacityTotalGB=%{NUMBER:CapacityTotalGB:float}, CapacityUsed=%{NUMBER:CapacityUsed:float}, CapacityUsedGB=%{NUMBER:CapacityUsedGB:float}, CapacityRemaining=%{NUMBER:CapacityRemaining:float}, CapacityRemainingGB=%{NUMBER:CapacityRemainingGB:float}, CapacityUsedNonDFS=%{NUMBER:CapacityUsedNonDFS:float}, TotalLoad=%{NUMBER:TotalLoad:float}, SnapshottableDirectories=%{NUMBER:SnapshottableDirectories:float}, Snapshots=%{NUMBER:Snapshots:float}, FilesTotal=%{NUMBER:FilesTotal:float}, PendingReplicationBlocks=%{NUMBER:PendingReplicationBlocks:float}, ScheduledReplicationBlocks=%{NUMBER:ScheduledReplicationBlocks:float}, PendingDeletionBlocks=%{NUMBER:PendingDeletionBlocks:float}, ExcessBlocks=%{NUMBER:ExcessBlocks:float}, PostponedMisreplicatedBlocks=%{NUMBER:PostponedMisreplicatedBlocks:float}, PendingDataNodeMessageCount=%{NUMBER:PendingDataNodeMessageCount:float}, MillisSinceLastLoadedEdits=%{NUMBER:MillisSinceLastLoadedEdits:float}, BlockCapacity=%{NUMBER:BlockCapacity:float}, StaleDataNodes=%{NUMBER:StaleDataNodes:float}, TotalFiles=%{NUMBER:TotalFiles:float}"]

             #metricssystem.MetricsSystem
             match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, NumActiveSources=%{NUMBER:NumActiveSources:float}, NumAllSources=%{NUMBER:NumAllSources:float}, NumActiveSinks=%{NUMBER:NumActiveSinks:float}, NumAllSinks=%{NUMBER:NumAllSinks:float}, Sink_diceNumOps=%{NUMBER:Sink_diceNumOps:float}, Sink_diceAvgTime=%{NUMBER:Sink_diceAvgTime:float}, Sink_diceDropped=%{NUMBER:Sink_diceDropped:float}, Sink_diceQsize=%{NUMBER:Sink_diceQsize:float}, SnapshotNumOps=%{NUMBER:SnapshotNumOps:float}, SnapshotAvgTime=%{NUMBER:SnapshotAvgTime:float}, PublishNumOps=%{NUMBER:PublishNumOps:float}, PublishAvgTime=%{NUMBER:PublishAvgTime:float}, DroppedPubAll=%{NUMBER: DroppedPubAll}"]

             #ugi.UgiMetrics
             match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, LoginSuccessNumOps=%{NUMBER:LoginSuccessNumOps:float}, LoginSuccessAvgTime=%{NUMBER:LoginSuccessAvgTime:float}, LoginFailureNumOps=%{NUMBER:LoginFailureNumOps:float}, LoginFailureAvgTime=%{NUMBER:LoginFailureAvgTime:float}, GetGroupsNumOps=%{NUMBER:GetGroupsNumOps:float}, GetGroupsAvgTime=%{NUMBER:GetGroupsAvgTime:float}"]

             #jvm.JvmMetrics
             match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: Context=%{WORD:context}, ProcessName=%{WORD:ProcessName}, SessionId=%{WORD:SessionId}, Hostname=%{HOSTNAME:hostname}, MemNonHeapUsedM=%{NUMBER:MemNonHeapUsedM:float}, MemNonHeapCommittedM=%{NUMBER:MemNonHeapCommittedM:float}, MemNonHeapMaxM=%{NUMBER:MemNonHeapMaxM:float}, MemHeapUsedM=%{NUMBER:MemHeapUsedM:float}, MemHeapCommittedM=%{NUMBER:MemHeapCommittedM:float}, MemHeapMaxM=%{NUMBER:MemHeapMaxM:float}, MemMaxM=%{NUMBER:MemMaxM:float}, GcCountParNew=%{NUMBER:GcCountParNew:float}, GcTimeMillisParNew=%{NUMBER:GcTimeMillisParNew:float}, GcCountConcurrentMarkSweep=%{NUMBER:GcCountConcurrentMarkSweep:float}, GcTimeMillisConcurrentMarkSweep=%{NUMBER:GcTimeMillisConcurrentMarkSweep:float}, GcCount=%{NUMBER:GcCount:float}, GcTimeMillis=%{NUMBER:GcTimeMillis:float}, GcNumWarnThresholdExceeded=%{NUMBER:GcNumWarnThresholdExceeded:float}, GcNumInfoThresholdExceeded=%{NUMBER:GcNumInfoThresholdExceeded:float}, GcTotalExtraSleepTime=%{NUMBER:GcTotalExtraSleepTime:float}, ThreadsNew=%{NUMBER:ThreadsNew:float}, ThreadsRunnable=%{NUMBER:ThreadsRunnable:float}, ThreadsBlocked=%{NUMBER:ThreadsBlocked:float}, ThreadsWaiting=%{NUMBER:ThreadsWaiting:float}, ThreadsTimedWaiting=%{NUMBER:ThreadsTimedWaiting:float}, ThreadsTerminated=%{NUMBER:ThreadsTerminated:float}, LogFatal=%{NUMBER:LogFatal:float}, LogError=%{NUMBER:LogError:float}, LogWarn=%{NUMBER:LogWarn:float}, LogInfo=%{NUMBER:LogInfo:float}"]

        }
    }

    if [type] == "nameNode"{
        metrics{
            timer => ["events4","%{duration}"]
            add_tag => "nnnode"
        }
    }


    if [type]=="mrapp"{
        grok{
             break_on_match => false

             #jvm.JvmMetrics
             match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: Context=%{WORD:context}, ProcessName=%{WORD:ProcessName}, SessionId=%{WORD:SessionId}, Hostname=%{HOSTNAME:hostname}, MemNonHeapUsedM=%{NUMBER:MemNonHeapUsedM:float}, MemNonHeapCommittedM=%{NUMBER:MemNonHeapCommittedM:float}, MemNonHeapMaxM=%{NOTSPACE:MemNonHeapMaxM}, MemHeapUsedM=%{NUMBER:MemHeapUsedM:float}, MemHeapCommittedM=%{NUMBER:MemHeapCommittedM:float}, MemHeapMaxM=%{NUMBER:MemHeapMaxM:float}, MemMaxM=%{NUMBER:MemMaxM:float}, GcCountPS Scavenge=%{NUMBER:GcCountPS_Scavenge}, GcTimeMillisPS Scavenge=%{NUMBER:GcTimeMillisPS_Scavenge}, GcCountPS MarkSweep=%{NUMBER:GcCountPS_MarkSweep}, GcTimeMillisPS MarkSweep=%{NUMBER:GcTimeMillisPS_MarkSweep}, GcCount=%{NUMBER:GcCount:float}, GcTimeMillis=%{NUMBER:GcTimeMillis:float}, ThreadsNew=%{NUMBER:ThreadsNew:float}, ThreadsRunnable=%{NUMBER:ThreadsRunnable:float}, ThreadsBlocked=%{NUMBER:ThreadsBlocked:float}, ThreadsWaiting=%{NUMBER:ThreadsWaiting:float}, ThreadsTimedWaiting=%{NUMBER:ThreadsTimedWaiting:float}, ThreadsTerminated=%{NUMBER:ThreadsTerminated:float}, LogFatal=%{NUMBER:LogFatal:float}, LogError=%{NUMBER:LogError:float}, LogWarn=%{NUMBER:LogWarn:float}, LogInfo=%{NUMBER:LogInfo:float}"]

             #ugi.UgiMetrics
             match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, LoginSuccessNumOps=%{NUMBER:LoginSuccessNumOps:float}, LoginSuccessAvgTime=%{NUMBER:LoginSuccessAvgTime:float}, LoginFailureNumOps=%{NUMBER:LoginFailureNumOps:float}, LoginFailureAvgTime=%{NUMBER:LoginFailureAvgTime:float}, GetGroupsNumOps=%{NUMBER:GetGroupsNumOps:float}, GetGroupsAvgTime=%{NUMBER:GetGroupsAvgTime:float}"]

             #mapred.MRAppMetrics
             match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, JobsSubmitted=%{NUMBER:JobsSubmitted:float}, JobsCompleted=%{NUMBER:JobsCompleted:float}, JobsFailed=%{NUMBER:JobsFailed:float}, JobsKilled=%{NUMBER:JobsKilled:float}, JobsPreparing=%{NUMBER:JobsPreparing:float:float}, JobsRunning=%{NUMBER:JobsRunning:float}, MapsLaunched=%{NUMBER:MapsLaunched:float}, MapsCompleted=%{NUMBER:MapsCompleted:float}, MapsFailed=%{NUMBER:MapsFailed:float}, MapsKilled=%{NUMBER:MapsKilled:float}, MapsRunning=%{NUMBER:MapsRunning:float}, MapsWaiting=%{NUMBER:MapsWaiting:float}, ReducesLaunched=%{NUMBER:ReducesLaunched:float}, ReducesCompleted=%{NUMBER:ReducesCompleted:float}, ReducesFailed=%{NUMBER:ReducesFailed:float}, ReducesKilled=%{NUMBER:ReducesKilled:float}, ReducesRunning=%{NUMBER:ReducesRunning:float}, ReducesWaiting=%{NUMBER:ReducesWaiting:float}"]

             #rpc.rpc
             match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: port=%{NUMBER:port:int}, Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, ReceivedBytes=%{NUMBER:ReceivedBytes:float}, SentBytes=%{NUMBER:SentBytes:float}, RpcQueueTimeNumOps=%{NUMBER:RpcQueueTimeNumOps:float}, RpcQueueTimeAvgTime=%{NUMBER:RpcQueueTimeAvgTime:float}, RpcProcessingTimeNumOps=%{NUMBER:RpcProcessingTimeNumOps:float}, RpcProcessingTimeAvgTime=%{NUMBER:RpcProcessingTimeAvgTime:float}, RpcAuthenticationFailures=%{NUMBER:RpcAuthenticationFailures:float}, RpcAuthenticationSuccesses=%{NUMBER:RpcAuthenticationSuccesses:float}, RpcAuthorizationFailures=%{NUMBER:RpcAuthorizationFailures:float}, RpcAuthorizationSuccesses=%{NUMBER:RpcAuthorizationSuccesses:float}, NumOpenConnections=%{NUMBER:NumOpenConnections:float}, CallQueueLength=%{NUMBER:CallQueueLength:float}"]

             #rpc.rpc(bis)
             match=>["message", "\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: port=%{NUMBER:port:int}, Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, ReceivedBytes=%{NUMBER:ReceivedBytes:float}, SentBytes=%{NUMBER:SentBytes:float}, RpcQueueTimeNumOps=%{NUMBER:RpcQueueTimeNumOps:float}, RpcQueueTimeAvgTime=%{NUMBER:RpcQueueTimeAvgTime:float}, RpcProcessingTimeNumOps=%{NUMBER:RpcProcessingTimeNumOps:float}, RpcProcessingTimeAvgTime=%{NUMBER:RpcProcessingTimeAvgTime:float}, RpcAuthenticationFailures=%{NUMBER:RpcAuthenticationFailures:float}, RpcAuthenticationSuccesses=%{NUMBER:RpcAuthenticationSuccesses:float}, RpcAuthorizationFailures=%{NUMBER:RpcAuthorizationFailures:float}, RpcAuthorizationSuccesses=%{NUMBER:RpcAuthorizationSuccesses:float}, RpcClientBackoff=%{NUMBER:RpcClientBackoff:float}, NumOpenConnections=%{NUMBER:NumOpenConnections:float}, CallQueueLength=%{NUMBER:CallQueueLength:float}"]

             #rpcdetailed
             match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: port=%{NUMBER:port:int}, Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, GetJobReportNumOps=%{NUMBER:GetJobReportNumOps}, GetJobReportAvgTime=%{NUMBER:GetJobReportAvgTime}, GetTaskAttemptCompletionEventsNumOps=%{NUMBER:GetTaskAttemptCompletionEventsNumOps}, GetTaskAttemptCompletionEventsAvgTime=%{NUMBER:GetTaskAttemptCompletionEventsAvgTime}"]

             #rpcdetailed (bis)
             match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: port=%{NUMBER:port:int}, Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, DoneNumOps=%{NUMBER:DoneNumOps}, DoneAvgTime=%{NUMBER:DoneAvgTime}, FatalErrorNumOps=%{NUMBER:FatalErrorNumOps}, FatalErrorAvgTime=%{NUMBER:FatalErrorAvgTime}, GetTaskNumOps=%{NUMBER:GetTaskNumOps}, GetTaskAvgTime=%{NUMBER:GetTaskAvgTime}, CanCommitNumOps=%{NUMBER:CanCommitNumOps}, CanCommitAvgTime=%{NUMBER:CanCommitAvgTime}, CommitPendingNumOps=%{NUMBER:CommitPendingNumOps}, CommitPendingAvgTime=%{NUMBER:CommitPendingAvgTime}, FsErrorNumOps=%{NUMBER:FsErrorNumOps}, FsErrorAvgTime=%{NUMBER:FsErrorAvgTime}, ShuffleErrorNumOps=%{NUMBER:ShuffleErrorNumOps}, ShuffleErrorAvgTime=%{NUMBER:ShuffleErrorAvgTime}, GetMapCompletionEventsNumOps=%{NUMBER:GetMapCompletionEventsNumOps}, GetMapCompletionEventsAvgTime=%{NUMBER:GetMapCompletionEventsAvgTime}, PingNumOps=%{NUMBER:PingNumOps}, PingAvgTime=%{NUMBER:PingAvgTime}, ReportDiagnosticInfoNumOps=%{NUMBER:ReportDiagnosticInfoNumOps}, ReportDiagnosticInfoAvgTime=%{NUMBER:ReportDiagnosticInfoAvgTime}, StatusUpdateNumOps=%{NUMBER:StatusUpdateNumOps}, StatusUpdateAvgTime=%{NUMBER:StatusUpdateAvgTime}, ReportNextRecordRangeNumOps=%{NUMBER:ReportNextRecordRangeNumOps}, ReportNextRecordRangeAvgTime=%{NUMBER:ReportNextRecordRangeAvgTime}"]

             #metricssystem.MetricsSystem
             match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, NumActiveSources=%{NUMBER:NumActiveSources:float}, NumAllSources=%{NUMBER:NumAllSources:float}, NumActiveSinks=%{NUMBER:NumActiveSinks:float}, NumAllSinks=%{NUMBER:NumAllSinks:float}, Sink_diceNumOps=%{NUMBER:Sink_diceNumOps:float}, Sink_diceAvgTime=%{NUMBER:Sink_diceAvgTime}, Sink_diceDropped=%{NUMBER:Sink_diceDropped:float}, Sink_diceQsize=%{NUMBER:Sink_diceQsize:float}, SnapshotNumOps=%{NUMBER:SnapshotNumOps:float}, SnapshotAvgTime=%{NUMBER:SnapshotAvgTime}, PublishNumOps=%{NUMBER:PublishNumOps:float}, PublishAvgTime=%{NUMBER:PublishAvgTime}, DroppedPubAll=%{NUMBER:DroppedPubAll}"]
        }
    }

    if [type] == "mrapp"{
        metrics{
            timer => ["events5","%{duration}"]
            add_tag => "mrappe"
        }
    }


    if [type]=="reduce"{
        grok{
             break_on_match => false

             #ugi.UgiMetrics
             match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, LoginSuccessNumOps=%{NUMBER:LoginSuccessNumOps:float}, LoginSuccessAvgTime=%{NUMBER:LoginSuccessAvgTime:float}, LoginFailureNumOps=%{NUMBER:LoginFailureNumOps:float}, LoginFailureAvgTime=%{NUMBER:LoginFailureAvgTime:float}, GetGroupsNumOps=%{NUMBER:GetGroupsNumOps:float}, GetGroupsAvgTime=%{NUMBER:GetGroupsAvgTime:float}"]

             #jvm.JvmMetrics
             match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: Context=%{WORD:context}, ProcessName=%{WORD:ProcessName}, SessionId=, Hostname=%{HOSTNAME:hostname}, MemNonHeapUsedM=%{NUMBER:MemNonHeapUsedM:float}, MemNonHeapCommittedM=%{NUMBER:MemNonHeapCommittedM:float}, MemNonHeapMaxM=%{NUMBER:MemNonHeapMaxM:float}, MemHeapUsedM=%{NUMBER:MemHeapUsedM:float}, MemHeapCommittedM=%{NUMBER:MemHeapCommittedM:float}, MemHeapMaxM=%{NUMBER:MemHeapMaxM:float}, MemMaxM=%{NUMBER:MemMaxM:float}, GcCountPS Scavenge=%{NUMBER:GcCountPS_Scavenge:float}, GcTimeMillisPS Scavenge=%{NUMBER:GcTimeMillisPS_Scavenge:float}, GcCountPS MarkSweep=%{NUMBER:GcCountPS_MarkSweep:float}, GcTimeMillisPS MarkSweep=%{NUMBER:GcTimeMillisPS_MarkSweep:float}, GcCount=%{NUMBER:GcCount:float}, GcTimeMillis=%{NUMBER:GcTimeMillis:float}, ThreadsNew=%{NUMBER:ThreadsNew:float}, ThreadsRunnable=%{NUMBER:ThreadsRunnable:float}, ThreadsBlocked=%{NUMBER:ThreadsBlocked:float}, ThreadsWaiting=%{NUMBER:ThreadsWaiting:float}, ThreadsTimedWaiting=%{NUMBER:ThreadsTimedWaiting:float}, ThreadsTerminated=%{NUMBER:ThreadsTerminated:float}, LogFatal=%{NUMBER:LogFatal:float}, LogError=%{NUMBER:LogError:float}, LogWarn=%{NUMBER:LogWarn:float}, LogInfo=%{NUMBER:LogInfo:float}"]

             #metricssystem.MetricsSystem
             match=>["message","\A%{NUMBER:job_id} %{WORD:serviceType}.%{WORD:serviceMetrics}: Context=%{WORD:context}, Hostname=%{HOSTNAME:hostname}, NumActiveSources=%{NUMBER:NumActiveSources:float}, NumAllSources=%{NUMBER:NumAllSources:float}, NumActiveSinks=%{NUMBER:NumActiveSinks:float}, NumAllSinks=%{NUMBER:NumAllSinks:float}, Sink_diceNumOps=%{NUMBER:Sink_diceNumOps:float}, Sink_diceAvgTime=%{NUMBER:Sink_diceAvgTime:float}, Sink_diceDropped=%{NUMBER:Sink_diceDropped:float}, Sink_diceQsize=%{NUMBER:Sink_diceQsize:float}, SnapshotNumOps=%{NUMBER:SnapshotNumOps:float}, SnapshotAvgTime=%{NUMBER:SnapshotAvgTime:float}, PublishNumOps=%{NUMBER:PublishNumOps:float}, PublishAvgTime=%{NUMBER:PublishAvgTime:float}, DroppedPubAll=%{NUMBER:DroppedPubAll:float}"]
        }
    }

    if [type] == "reduce"{
        metrics{
            timer => ["events6","%{duration}"]
            add_tag => "reduce"
        }
    }

}

output {

   if "metric" in [tags]{
        stdout{codec => line {format => "node Mng@1m rate:%{[events][rate_1m]}->5m rate:%{[events][rate_5m]}->15m rate:%{[events][rate_15m]}->count:(%{[events][count]})"}}
   }

   if "metric2" in [tags]{
        stdout{codec => line {format => "Data Node@1m rate:%{[events2][rate_1m]}->5m rate:%{[events2][rate_5m]}->15m rate:%{[events2][rate_15m]}->count:(%{[events2][count]})"}}
   }

   if "mresMng" in [tags]{
        stdout{codec => line {format => "Resource Mng@1m rate:%{[events3][rate_1m]}->5m rate:%{[events3][rate_5m]}->15m rate:%{[events3][rate_15m]}->count:(%{[events3][count]})"}}
   }

   if "nnnode" in [tags]{
        stdout{codec => line {format => "Name Node@1m rate:%{[events4][rate_1m]}->5m rate:%{[events4][rate_5m]}->15m rate:%{[events4][rate_15m]}->count:(%{[events4][count]})"}}
   }

   if "mrappe" in [tags]{
        stdout{codec => line {format => "MR App@1m rate:%{[events5][rate_1m]}->5m rate:%{[events5][rate_5m]}->15m rate:%{[events5][rate_15m]}->count:(%{[events5][count]})"}}
   }

   if "reduce" in [tags]{
        stdout{codec => line {format => "Reduce@1m rate:%{[events6][rate_1m]}->5m rate:%{[events6][rate_5m]}->15m rate:%{[events6][rate_15m]}->count:(%{[events6][count]})"}}
   }

    file {
        path => "/tmp/parse.out"
   }
}